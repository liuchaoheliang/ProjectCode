<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="merchantOnlineApply">

	<typeAlias alias="merchantOnlineApply" type="com.froad.CB.po.MerchantOnlineApply"/>
	
	<resultMap class="merchantOnlineApply" id="MerchantOnlineApplyResult">
		<result column="id" jdbcType="INTEGER" property="id" />
		<result column="merchant_name" jdbcType="VARCHAR" property="merchantName" />
		<result column="linkman" jdbcType="VARCHAR" property="linkman" />
		<result column="mobile" jdbcType="VARCHAR" property="mobile" />
		<result column="phone" jdbcType="VARCHAR" property="phone" />
		<result column="address" jdbcType="VARCHAR" property="address" />
		<result column="mechant_industry_id" jdbcType="VARCHAR" property="mechantIndustryId" />
		<result column="cooperation_model" jdbcType="VARCHAR" property="cooperationModel" />
		<result column="cooperative_purpose" jdbcType="VARCHAR" property="cooperativePurpose" />
		<result column="is_relation" jdbcType="VARCHAR" property="isRelation" />
		<result column="relation_account" jdbcType="VARCHAR" property="relationAccount" />
		<result column="relation_time" jdbcType="VARCHAR" property="relationTime" />
		<result column="relation_mark" jdbcType="VARCHAR" property="relationMark" />
		<result column="state" jdbcType="VARCHAR" property="state" />
		<result column="create_time" jdbcType="VARCHAR" property="createTime" />
		<result column="update_time" jdbcType="VARCHAR" property="updateTime" />
		<result column="remark" jdbcType="VARCHAR" property="remark" />
		<result column="user_id" jdbcType="VARCHAR" property="userId"/>
	</resultMap>
	
	<select id="selectByPrimaryKey" parameterClass="java.lang.Integer"
		resultMap="MerchantOnlineApplyResult">
		select * from merchant_online_apply where id = #id:INTEGER#
	</select>
	
	<select id="getByUserId" parameterClass="java.lang.String"
		resultMap="MerchantOnlineApplyResult">
		select * from merchant_online_apply where user_id = #value#
	</select>
	
	<delete id="deleteByPrimaryKey" parameterClass="java.lang.Integer">
		delete from merchant_online_apply where id = #id:INTEGER#
	</delete>
	
	<insert id="insert" parameterClass="merchantOnlineApply">
		insert into merchant_online_apply (id,user_id, merchant_name, linkman,
		mobile, phone, address, mechant_industry_id, cooperation_model,
		cooperative_purpose, is_relation, relation_account,
		relation_time, relation_mark, state,
		remark, create_time, update_time) values (#id:INTEGER#,#userId#, #merchantName:VARCHAR#,
		#linkman:VARCHAR#, #mobile:VARCHAR#, #phone:VARCHAR#,
		#address:VARCHAR#, #mechantIndustryId:VARCHAR#,
		#cooperationModel:VARCHAR#, #cooperativePurpose:VARCHAR#,
		#isRelation:VARCHAR#, #relationAccount:VARCHAR#,
		#relationTime:VARCHAR#, #relationMark:VARCHAR#, #state:VARCHAR#,
		#remark:VARCHAR#,
		DATE_FORMAT(NOW(),"%Y-%m-%d|%H:%i:%s"),DATE_FORMAT(NOW(),"%Y-%m-%d|%H:%i:%s"))
		<selectKey keyProperty="id" resultClass="int">
		 select last_insert_id() as id
		</selectKey>
	</insert>
	
	<update id="updateById" parameterClass="merchantOnlineApply">
		update merchant_online_apply set update_time=DATE_FORMAT(NOW(),"%Y-%m-%d|%H:%i:%s")
		<dynamic>
			<isNotEmpty prepend="," property="userId">
				user_id = #userId:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="," property="merchantName">
				merchant_name = #merchantName:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="," property="linkman">
				linkman = #linkman:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="," property="mobile">
				mobile = #mobile:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="," property="phone">
				phone = #phone:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="," property="address">
				address = #address:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="," property="mechantIndustryId">
				mechant_industry_id = #mechantIndustryId:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="," property="cooperationModel">
				cooperation_model = #cooperationModel:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="," property="cooperativePurpose">
				cooperative_purpose = #cooperativePurpose:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="," property="isRelation">
				is_relation = #isRelation:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="," property="relationAccount">
				relation_account = #relationAccount:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="," property="relationTime">
				relation_time = #relationTime:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="," property="relationMark">
				relation_mark = #relationMark:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="," property="state">
				state = #state:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="," property="remark">
				remark = #remark:VARCHAR#
			</isNotEmpty>
		</dynamic>
		where id = #id:INTEGER#
	</update>
	
	<select id="getByPager" parameterClass="merchantOnlineApply" resultMap="MerchantOnlineApplyResult">
		select * from merchant_online_apply
		<dynamic prepend="where">
			<isNotEmpty prepend="and" property="userId">
				user_id = #userId:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="merchantName">
				merchant_name = #merchantName:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="linkman">
				linkman = #linkman:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="mobile">
				mobile = #mobile:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="phone">
				phone = #phone:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="address">
				address = #address:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="mechantIndustryId">
				mechant_industry_id = #mechantIndustryId:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="cooperationModel">
				cooperation_model = #cooperationModel:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="cooperativePurpose">
				cooperative_purpose = #cooperativePurpose:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="isRelation">
				is_relation = #isRelation:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="relationAccount">
				relation_account = #relationAccount:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="relationTime">
				relation_time = #relationTime:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="relationMark">
				relation_mark = #relationMark:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="state">
				state = #state:VARCHAR#
			</isNotEmpty>
			<isEmpty property="state">
		      	<isNotEmpty property="stateList" prepend="and">
		      		state in
		      		<iterate open="(" conjunction="," close=")" property="stateList">
		      			#stateList[]#
		      		</iterate>
		      	</isNotEmpty>
	      	</isEmpty>
			<isNotEmpty prepend="and" property="updateTime">
				update_time = #updateTime:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="remark">
				remark = #remark:VARCHAR#
			</isNotEmpty>
			<isNotEmpty property="beginTime">
    			<isNotEmpty property="endTime" prepend="and">
    				create_time between #beginTime# and #endTime#
    			</isNotEmpty>
    		</isNotEmpty>
    	</dynamic>
        <![CDATA[ 
        order by $orderBy$ $orderType$ 
        limit #startRow#,#pageSize#  
        ]]>
	</select>
	
	<select id="getByPagerCount" parameterClass="merchantOnlineApply" resultClass="int">
		select count(*) from merchant_online_apply
		<dynamic prepend="where">
			<isNotEmpty prepend="and" property="userId">
				user_id = #userId:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="merchantName">
				merchant_name = #merchantName:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="linkman">
				linkman = #linkman:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="mobile">
				mobile = #mobile:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="phone">
				phone = #phone:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="address">
				address = #address:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="mechantIndustryId">
				mechant_industry_id = #mechantIndustryId:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="cooperationModel">
				cooperation_model = #cooperationModel:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="cooperativePurpose">
				cooperative_purpose = #cooperativePurpose:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="isRelation">
				is_relation = #isRelation:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="relationAccount">
				relation_account = #relationAccount:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="relationTime">
				relation_time = #relationTime:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="relationMark">
				relation_mark = #relationMark:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="state">
				state = #state:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="updateTime">
				update_time = #updateTime:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="remark">
				remark = #remark:VARCHAR#
			</isNotEmpty>
			<isNotEmpty property="beginTime">
    			<isNotEmpty property="endTime" prepend="and">
    				create_time between #beginTime# and #endTime#
    			</isNotEmpty>
    		</isNotEmpty>
    	</dynamic>
	</select>
</sqlMap>