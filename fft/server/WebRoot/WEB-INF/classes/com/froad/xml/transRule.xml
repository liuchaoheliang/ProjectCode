<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="trans_rule" >
  <resultMap id="abatorgenerated_TransRuleResult" class="com.froad.CB.po.TransRule" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jan 30 18:03:53 CST 2013.
    -->
    <result column="id" property="id" jdbcType="INT" />
    <result column="price_type" property="priceType" jdbcType="VARCHAR" />
    <result column="trans_type" property="transType" jdbcType="VARCHAR" />
    <result column="rule_type" property="ruleType" jdbcType="VARCHAR" />
    <result column="fft_factorage_formula" property="fftFactorageFormula" jdbcType="VARCHAR" />
    <result column="bank_factorage_formula" property="bankFactorageFormula" jdbcType="VARCHAR" />
    <result column="rule_Desc" property="ruleDesc" jdbcType="VARCHAR" />
    <result column="currency" property="currency" jdbcType="VARCHAR" />
    <result column="end_time" property="endTime" jdbcType="VARCHAR" />
    <result column="start_time" property="startTime" jdbcType="VARCHAR" />
    <result column="currency_formula" property="currencyFormula" jdbcType="VARCHAR" />
    <result column="points_type" property="pointsType" jdbcType="VARCHAR" />
    <result column="points_formula" property="pointsFormula" jdbcType="VARCHAR" />
    <result column="state" property="state" jdbcType="VARCHAR" />
    <result column="create_time" property="createTime" jdbcType="VARCHAR" />
    <result column="update_time" property="updateTime" jdbcType="VARCHAR" />
    <result column="remark" property="remark" jdbcType="VARCHAR" />
    
     <result column="id" property="ruleDetailList" select="rule_detail.selectRuleDetailByRuleId" />   
  </resultMap>
  <select id="abatorgenerated_selectByPrimaryKey" resultMap="abatorgenerated_TransRuleResult" parameterClass="com.froad.CB.po.TransRule" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jan 30 18:03:53 CST 2013.
    -->
    select *
    from trans_rule
    where id =#id:INT#
  </select>
  <delete id="abatorgenerated_deleteByPrimaryKey" parameterClass="com.froad.CB.po.TransRule" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jan 30 18:03:53 CST 2013.
    -->
    delete from trans_rule
    where id = #id:INT#
  </delete>
  <insert id="abatorgenerated_insert" parameterClass="com.froad.CB.po.TransRule" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jan 30 18:03:53 CST 2013.
    -->
    insert into trans_rule (id, price_type, trans_type, rule_type, fft_factorage_formula,
      bank_factorage_formula, rule_Desc, currency, end_time, start_time, currency_formula,
      points_type, points_formula, state, create_time, update_time, remark)
    values (#id:INT#, #priceType:VARCHAR#, #transType:VARCHAR#, #ruleType:VARCHAR#,
      #fftFactorageFormula:VARCHAR#, #bankFactorageFormula:VARCHAR#, #ruleDesc:VARCHAR#,
      #currency:VARCHAR#, #endTime:VARCHAR#, #startTime:VARCHAR#, #currencyFormula:VARCHAR#,
      #pointsType:VARCHAR#, #pointsFormula:VARCHAR#, #state:VARCHAR#, DATE_FORMAT(NOW(),"%Y-%m-%d|%H:%i:%s"),
      DATE_FORMAT(NOW(),"%Y-%m-%d|%H:%i:%s"), #remark:VARCHAR#)
      <selectKey resultClass="int" keyProperty="id">
			select last_insert_id() as id
		</selectKey>
  </insert>
  <update id="abatorgenerated_updateByPrimaryKey" parameterClass="com.froad.CB.po.TransRule" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jan 30 18:03:53 CST 2013.
    -->
    update trans_rule
    set price_type = #priceType:VARCHAR#,
      trans_type = #transType:VARCHAR#,
      rule_type = #ruleType:VARCHAR#,
      fft_factorage_formula = #fftFactorageFormula:VARCHAR#,
      bank_factorage_formula = #bankFactorageFormula:VARCHAR#,
      rule_Desc = #ruleDesc:VARCHAR#,
      currency = #currency:VARCHAR#,
      end_time = #endTime:VARCHAR#,
      start_time = #startTime:VARCHAR#,
      currency_formula = #currencyFormula:VARCHAR#,
      points_type = #pointsType:VARCHAR#,
      points_formula = #pointsFormula:VARCHAR#,
      state = #state:VARCHAR#,
      update_time = DATE_FORMAT(NOW(),"%Y-%m-%d|%H:%i:%s"),
      remark = #remark:VARCHAR#
    where id = #id:INT#
  </update>
  <update id="abatorgenerated_updateByPrimaryKeySelective" parameterClass="com.froad.CB.po.TransRule" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jan 30 18:03:53 CST 2013.
    -->
    update trans_rule set update_time = DATE_FORMAT(NOW(),"%Y-%m-%d|%H:%i:%s")
    <dynamic prepend="" >
      <isNotNull prepend="," property="priceType" >
        price_type = #priceType:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="transType" >
        trans_type = #transType:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="ruleType" >
        rule_type = #ruleType:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="fftFactorageFormula" >
        fft_factorage_formula = #fftFactorageFormula:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="bankFactorageFormula" >
        bank_factorage_formula = #bankFactorageFormula:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="ruleDesc" >
        rule_Desc = #ruleDesc:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="currency" >
        currency = #currency:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="endTime" >
        end_time = #endTime:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="startTime" >
        start_time = #startTime:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="currencyFormula" >
        currency_formula = #currencyFormula:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="pointsType" >
        points_type = #pointsType:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="pointsFormula" >
        points_formula = #pointsFormula:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="state" >
        state = #state:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="remark" >
        remark = #remark:VARCHAR#
      </isNotNull>
    </dynamic>
    where id = #id:INT#
  </update>
  
  <select id="selectTransRules" resultMap="abatorgenerated_TransRuleResult"  parameterClass="com.froad.CB.po.TransRule"  >
   select * from trans_rule
    <dynamic prepend="where" >
     	<isNotNull prepend="and" property="id" >
        id =#id:INT#
      </isNotNull>
      <isNotNull prepend="and" property="priceType" >
        price_type = #priceType:VARCHAR#
      </isNotNull>
      <isNotNull prepend="and" property="transType" >
        trans_type = #transType:VARCHAR#
      </isNotNull>
      <isNotNull prepend="and" property="ruleType" >
        rule_type = #ruleType:VARCHAR#
      </isNotNull>
      <isNotNull prepend="and" property="fftFactorageFormula" >
        fft_factorage_formula = #fftFactorageFormula:VARCHAR#
      </isNotNull>
      <isNotNull prepend="and" property="bankFactorageFormula" >
        bank_factorage_formula = #bankFactorageFormula:VARCHAR#
      </isNotNull>
      <isNotNull prepend="and" property="ruleDesc" >
        rule_Desc = #ruleDesc:VARCHAR#
      </isNotNull>
      <isNotNull prepend="and" property="currency" >
        currency = #currency:VARCHAR#
      </isNotNull>
      <isNotNull prepend="and" property="endTime" >
        end_time = #endTime:VARCHAR#
      </isNotNull>
      <isNotNull prepend="and" property="startTime" >
        start_time = #startTime:VARCHAR#
      </isNotNull>
      <isNotNull prepend="and" property="currencyFormula" >
        currency_formula = #currencyFormula:VARCHAR#
      </isNotNull>
      <isNotNull prepend="and" property="pointsType" >
        points_type = #pointsType:VARCHAR#
      </isNotNull>
      <isNotNull prepend="and" property="pointsFormula" >
        points_formula = #pointsFormula:VARCHAR#
      </isNotNull>
      <isNotNull prepend="and" property="state" >
        state = #state:VARCHAR#
      </isNotNull>
      <isNotNull prepend="and" property="createTime" >
        create_time = #createTime:VARCHAR#
      </isNotNull>
      <isNotNull prepend="and" property="updateTime" >
        update_time = #updateTime:VARCHAR#
      </isNotNull>
      <isNotNull prepend="and" property="remark" >
        remark = #remark:VARCHAR#
      </isNotNull>
    </dynamic>
  </select>
  <!--
    <select id="selectTransRuleById" resultMap="abatorgenerated_TransRuleResult" parameterClass="java.lang.Integer" >
    select *
    from trans_rule
    where id = #value#
  </select>
   -->
</sqlMap>