<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="goodsExchangeRack">
	
	<typeAlias alias="goodsExchangeRack" type="com.froad.CB.po.GoodsExchangeRack" />

	<resultMap class="goodsExchangeRack" id="goodsExchangeRackResult">
		<result property="id" column="id"/>
		<result property="goodsId" column="goods_id"/>
		<result property="goods" column="goods_id" select="goods.selectById"/>
		<result property="isRack" column="is_rack"/>
		<result property="rackTime" column="rack_time"/>
		<result property="inspectors" column="inspectors"/>
		<result property="marketTotalNumber" column="market_total_number"/>
		<result property="isCash" column="is_cash"/>
		<result property="isFftPoint" column="is_fft_point"/>
		<result property="isBankPoint" column="is_bank_point"/>
		<result property="isFftpointCash" column="is_fftpoint_cash"/>
		<result property="isBankpointCash" column="is_bankpoint_cash"/>
		<result property="isFftpointcashRatioPricing" column="is_fftpointcash_ratio_pricing"/>
		<result property="isBankpointcashRatioPricing" column="is_bankpointcash_ratio_pricing"/>
		<result property="cashPricing" column="cash_pricing"/>		
		<result property="fftPointPricing" column="fft_point_pricing"/>	
		<result property="bankPointPricing" column="bank_point_pricing"/>	
		<result property="fftpointCashPricing" column="fftpoint_cash_pricing"/>	
		<result property="bankpointCashPricing" column="bankpoint_cash_pricing"/>	
		<result property="fftpointcashRatioPricing" column="fftpointcash_ratio_pricing"/>
		<result property="bankpointcashRatioPricing" column="bankpointcash_ratio_pricing"/>			
		<result property="state" column="state"/>
		<result property="createTime" column="create_time"/>
		<result property="updateTime" column="update_time"/>
		<result property="remark" column="remark"/>
		<result property="goodsCategoryId" column="goods_category_id"/>
		
		<result column="cash_pricing_desc" property="cashPricingDesc" jdbcType="VARCHAR" />
		<result column="fft_point_pricing_desc" property="fftPointPricingDesc" jdbcType="VARCHAR" />
		<result column="bank_point_pricing_desc" property="bankPointPricingDesc" jdbcType="VARCHAR" />
		<result column="fftpoint_cash_pricing_desc" property="fftPointCashPricingDesc" jdbcType="VARCHAR" />
		<result column="bankpoint_cash_pricing_desc" property="bankPointCashPricingDesc" jdbcType="VARCHAR" />
		<result column="fftpointcash_ratio_pricing_desc" property="fftPointCashRatioPricingDesc" jdbcType="VARCHAR" />
		<result column="bankpointcash_ratio_pricing_desc" property="bankPointCashRatioPricingDesc" jdbcType="VARCHAR" />
		
		<result column="days" property="days" jdbcType="Integer"/>
		<result property="sellerId" column="seller_id"/>
		<result property="seller" column="seller_id" select="seller.selectByPrimaryKey"/>
		
		<result property="merchantId" column="merchant_id"/>
		<result property="merchant" column="merchant_id" select="merchant.selectByPrimaryKey"/>
		<result property="goodsExchangeRackImages" column="id" select="goodsExchangeRackImages.getByGoodsExchangeRackId"/>
		
		<result property="goodsRackName" column="goodsrack_name"/>
		<result property="goodsRackDesc" column="goodsrack_desc"/>
		
		<result property="goodsRackDetail" column="goods_rack_detail"/>
		<result property="isPresentPoints" column="is_present_points"/>
		<result property="priority" column="priority"/>
		<result property="isIndexShow" column="is_index_show"/>
		<result property="indexPriority" column="index_priority"/>
	</resultMap>
	
	<!-- 添加商品收款架信息 -->
	<insert id="addGoodsExchangeRack" parameterClass="goodsExchangeRack">
		<![CDATA[ 
				insert into goods_exchange_rack(id,seller_id,days,goods_category_id,goods_id,is_rack,rack_time,inspectors,market_total_number,is_cash,
				is_fft_point,is_bank_point,is_fftpoint_cash,is_bankpoint_cash,is_fftpointcash_ratio_pricing,is_bankpointcash_ratio_pricing,cash_pricing,
				fft_point_pricing,bank_point_pricing,fftpoint_cash_pricing,bankpoint_cash_pricing,fftpointcash_ratio_pricing,bankpointcash_ratio_pricing,
				state,create_time,update_time,remark,cash_pricing_desc,fft_point_pricing_desc,bank_point_pricing_desc,fftpoint_cash_pricing_desc,
        		bankpoint_cash_pricing_desc,fftpointcash_ratio_pricing_desc,bankpointcash_ratio_pricing_desc,merchant_id,goodsrack_name,goodsrack_desc,goods_rack_detail,
        		is_present_points,priority,is_index_show,index_priority)
				values(#id#,#sellerId#,#days#,#goodsCategoryId#,#goodsId#,#isRack#,#rackTime#,#inspectors#,#marketTotalNumber#,#isCash#,
				#isFftPoint#,#isBankPoint#,#isFftpointCash#,#isBankpointCash#,#isFftpointcashRatioPricing#,#isBankpointcashRatioPricing#,
				#cashPricing#,#fftPointPricing#,#bankPointPricing#,#fftpointCashPricing#,#bankpointCashPricing#,#fftpointcashRatioPricing#,#bankpointcashRatioPricing#,
				#state#,DATE_FORMAT(NOW(),"%Y-%m-%d|%H:%i:%s"),DATE_FORMAT(NOW(),"%Y-%m-%d|%H:%i:%s"),#remark#,#cashPricingDesc:VARCHAR#,
				#fftPointPricingDesc:VARCHAR#,#bankPointPricingDesc:VARCHAR#,#fftPointCashPricingDesc:VARCHAR#,#bankPointCashPricingDesc:VARCHAR#,
				#fftPointCashRatioPricingDesc:VARCHAR#,#bankPointCashRatioPricingDesc:VARCHAR#,#merchantId#,#goodsRackName#,#goodsRackDesc#,#goodsRackDetail#,
				#isPresentPoints#,#priority#,0,0)
		]]>
			<selectKey keyProperty="id" resultClass="int">
				select last_insert_id() as id
			</selectKey>
	</insert>
	
	<!-- 更新商品收款架信息  -->
	<update id="updateGoodsExchangeRackById" parameterClass="goodsExchangeRack" >
	    <![CDATA[ 
	    		update goods_exchange_rack a 
	    		set a.update_time = DATE_FORMAT(NOW(),"%Y-%m-%d|%H:%i:%s")
	    ]]>
		<dynamic>
		     <isNotEmpty prepend="," property="goodsId">
		         <![CDATA[  a.goods_id = #goodsId# ]]>
		     </isNotEmpty> 
		     <isNotEmpty prepend="," property="days">
		         <![CDATA[  a.days = #days# ]]>
		     </isNotEmpty> 
		     <isNotEmpty prepend="," property="isRack">
		         <![CDATA[  a.is_rack = #isRack# ]]>
		     </isNotEmpty> 
		     <isNotEmpty prepend="," property="rackTime">
		         <![CDATA[  a.rack_time = #rackTime# ]]>
		     </isNotEmpty> 
		     <isNotEmpty prepend="," property="inspectors">
		         <![CDATA[  a.inspectors = #inspectors# ]]>
		     </isNotEmpty> 
		     <isNotEmpty prepend="," property="marketTotalNumber">
		         <![CDATA[  a.market_total_number = #marketTotalNumber# ]]>
		     </isNotEmpty> 
		     <isNotEmpty prepend="," property="isCash">
		         <![CDATA[  a.is_cash = #isCash# ]]>
		     </isNotEmpty> 		     
		     <isNotEmpty prepend="," property="isFftPoint">
		         <![CDATA[  a.is_fft_point = #isFftPoint# ]]>
		     </isNotEmpty> 
		     <isNotEmpty prepend="," property="isBankPoint">
		         <![CDATA[  a.is_bank_point = #isBankPoint# ]]>
		     </isNotEmpty> 
		     <isNotEmpty prepend="," property="isFftpointCash">
		         <![CDATA[  a.is_fftpoint_cash = #isFftpointCash# ]]>
		     </isNotEmpty> 
		     <isNotEmpty prepend="," property="goodsCategoryId">
		         <![CDATA[  a.goods_category_id = #goodsCategoryId# ]]>
		     </isNotEmpty> 
		     <isNotEmpty prepend="," property="isBankpointCash">
		         <![CDATA[  a.is_bankpoint_cash = #isBankpointCash# ]]>
		     </isNotEmpty> 
		     <isNotEmpty prepend="," property="isFftpointcashRatioPricing">
		         <![CDATA[  a.is_fftpointcash_ratio_pricing = #isFftpointcashRatioPricing# ]]>
		     </isNotEmpty> 
		     <isNotEmpty prepend="," property="isBankpointcashRatioPricing">
		         <![CDATA[  a.is_bankpointcash_ratio_pricing = #isBankpointcashRatioPricing# ]]>
		     </isNotEmpty> 		     
		     <isNotEmpty prepend="," property="cashPricing">
		         <![CDATA[  a.cash_pricing = #cashPricing# ]]>
		     </isNotEmpty> 		     
		     <isNotEmpty prepend="," property="fftPointPricing">
		         <![CDATA[  a.fft_point_pricing = #fftPointPricing# ]]>
		     </isNotEmpty> 
		     <isNotEmpty prepend="," property="bankPointPricing">
		         <![CDATA[  a.bank_point_pricing = #bankPointPricing# ]]>
		     </isNotEmpty> 
		     <isNotEmpty prepend="," property="fftpointCashPricing">
		         <![CDATA[  a.fftpoint_cash_pricing = #fftpointCashPricing# ]]>
		     </isNotEmpty> 
		     <isNotEmpty prepend="," property="bankpointCashPricing">
		         <![CDATA[  a.bankpoint_cash_pricing = #bankpointCashPricing# ]]>
		     </isNotEmpty> 
		     <isNotEmpty prepend="," property="fftpointcashRatioPricing">
		         <![CDATA[  a.fftpointcash_ratio_pricing = #fftpointcashRatioPricing# ]]>
		     </isNotEmpty> 
		     <isNotEmpty prepend="," property="bankpointcashRatioPricing">
		         <![CDATA[  a.bankpointcash_ratio_pricing = #bankpointcashRatioPricing# ]]>
		     </isNotEmpty> 		     
		     <isNotEmpty prepend="," property="state">
		         <![CDATA[  a.state = #state# ]]>
		     </isNotEmpty> 
		     <isNotEmpty prepend="," property="remark">
		         <![CDATA[  a.remark = #remark# ]]>
		      </isNotEmpty>
		      <isNotEmpty prepend="," property="goodsRackName">
		         <![CDATA[  a.goodsrack_name = #goodsRackName# ]]>
		      </isNotEmpty>
		      <isNotEmpty prepend="," property="goodsRackDesc">
		         <![CDATA[  a.goodsrack_desc = #goodsRackDesc# ]]>
		      </isNotEmpty>
		      <isNotEmpty prepend="," property="goodsRackDetail">
		         <![CDATA[  a.goods_rack_detail = #goodsRackDetail# ]]>
		      </isNotEmpty>
		        <isNotEmpty prepend="," property="cashPricingDesc">
					<![CDATA[  a.cash_pricing_desc = #cashPricingDesc# ]]>
				</isNotEmpty>
				<isNotEmpty prepend="," property="fftPointPricingDesc">
					<![CDATA[  a.fft_point_pricing_desc = #fftPointPricingDesc# ]]>
				</isNotEmpty>
				<isNotEmpty prepend="," property="bankPointPricingDesc">
					<![CDATA[  a.bank_point_pricing_desc = #bankPointPricingDesc# ]]>
				</isNotEmpty>
				<isNotEmpty prepend="," property="fftPointCashPricingDesc">
					<![CDATA[  a.fftpoint_cash_pricing_desc = #fftPointCashPricingDesc# ]]>
				</isNotEmpty>
				<isNotEmpty prepend="," property="bankPointCashPricingDesc">
					<![CDATA[  a.bankpoint_cash_pricing_desc = #bankPointCashPricingDesc# ]]>
				</isNotEmpty>
				<isNotEmpty prepend="," property="fftPointCashRatioPricingDesc">
					<![CDATA[  a.fftpointcash_ratio_pricing_desc = #fftPointCashRatioPricingDesc# ]]>
				</isNotEmpty>
				<isNotEmpty prepend="," property="bankPointCashRatioPricingDesc">
					<![CDATA[  a.bankpointcash_ratio_pricing_desc = #bankPointCashRatioPricingDesc# ]]>
				</isNotEmpty>
				<isNotEmpty prepend="," property="isPresentPoints">
					<![CDATA[  a.is_present_points = #isPresentPoints# ]]>
				</isNotEmpty>
				<isNotEmpty prepend="," property="priority">
					a.priority = #priority#
				</isNotEmpty>
				<isNotEmpty prepend="," property="isIndexShow">
					a.is_index_show = #isIndexShow#
				</isNotEmpty>
				<isNotEmpty prepend="," property="indexPriority">
					a.index_priority = #indexPriority#
				</isNotEmpty>
		</dynamic>
		<![CDATA[ where a.id = #id# ]]>
	</update>
	
	<!-- 增加销量 -->
	<update id="addSaleNumberById" parameterClass="java.util.HashMap">
		<![CDATA[
		update goods_exchange_rack set update_time =DATE_FORMAT(NOW(),"%Y-%m-%d|%H:%i:%s"),
		market_total_number=market_total_number+#num# where id=#id#
		]]>
	</update>
	
	<!-- 根据id物理删除商品收款架信息 -->
	<delete id="deleteByPrimaryKey" parameterClass="goodsExchangeRack" >
	    <![CDATA[ 
    			delete from goods_exchange_rack where id = #id#
	     ]]>
	</delete>
	
	<!-- 根据id删除商品收款架信息 -->
	<update id="deleteStateByPrimaryKey" parameterClass="goodsExchangeRack" >
	    <![CDATA[ 
    			update goods_exchange_rack a 
		     	set a.update_time = DATE_FORMAT(NOW(),"%Y-%m-%d|%H:%i:%s"),a.state = '50' 
		     	where a.id = #id:INT#
	     ]]>
	</update>
	
	<!-- 根据goodsId查询商品收款架信息 -->
	<select id="getGoodsExchangeRackByGoodsId" parameterClass="string" resultMap="goodsExchangeRackResult">
		select * from goods_exchange_rack a where a.goods_id=#goodsId#
	</select>
	
	<!-- 根据主键编号查询商品收款架信息 -->
	<select id="selectByPrimaryKey" parameterClass="java.lang.Integer" resultMap="goodsExchangeRackResult">
		select * from goods_exchange_rack a where a.id=#id#
	</select>
	
	<!-- 查询商品收款架信息  -->
    <select id="getGoodsExchangeRackBySelective"  parameterClass="goodsExchangeRack" resultMap="goodsExchangeRackResult">
    	select * from goods_exchange_rack a where <![CDATA[ a.state <> '50' ]]>	
    	<dynamic prepend="">
    		<isNotEmpty property="id" prepend="and">
    			<![CDATA[  a.id=#id# ]]>
    		</isNotEmpty>
    		<isNotEmpty prepend="and" property="sellerId">
				a.seller_id = #sellerId:VARCHAR#
			</isNotEmpty>
    		<isNotEmpty prepend="and" property="days">
		         <![CDATA[  a.days = #days# ]]>
		     </isNotEmpty> 
    		<isNotEmpty property="goodsId" prepend="and">
    			<![CDATA[  a.goods_id = #goodsId# ]]>
    		</isNotEmpty>
    		<isNotEmpty property="isRack" prepend="and">
    			<![CDATA[  a.is_rack = #isRack# ]]>
    		</isNotEmpty>
    		<isNotEmpty property="rackTime" prepend="and">
    			<![CDATA[  a.rack_time = #rackTime# ]]>
    		</isNotEmpty>
    		<isNotEmpty property="state" prepend="and">
    			<![CDATA[ a.state=#state# ]]>
    		</isNotEmpty>
    		<isNotEmpty property="isCash" prepend="and">
		         <![CDATA[  a.is_cash = #isCash# ]]>
		     </isNotEmpty> 
		     <isNotEmpty property="isFftPoint" prepend="and">
		         <![CDATA[  a.is_fft_point = #isFftPoint# ]]>
		     </isNotEmpty> 
		     <isNotEmpty property="isBankPoint" prepend="and">
		         <![CDATA[  a.is_bank_point = #isBankPoint# ]]>
		     </isNotEmpty> 
		     <isNotEmpty property="isFftpointCash" prepend="and">
		         <![CDATA[  a.is_fftpoint_cash = #isFftpointCash# ]]>
		     </isNotEmpty> 
		     <isNotEmpty property="isBankpointCash" prepend="and">
		         <![CDATA[  a.is_bankpoint_cash = #isBankpointCash# ]]>
		     </isNotEmpty> 
		     <isNotEmpty property="isFftpointcashRatioPricing" prepend="and">
		         <![CDATA[  a.is_fftpointcash_ratio_pricing = #isFftpointcashRatioPricing# ]]>
		     </isNotEmpty> 
		     <isNotEmpty property="isBankpointcashRatioPricing" prepend="and">
		         <![CDATA[  a.is_bankpointcash_ratio_pricing = #isBankpointcashRatioPricing# ]]>
		     </isNotEmpty> 		     
		     <isNotEmpty property="cashPricing" prepend="and">
		         <![CDATA[  a.cash_pricing = #cashPricing# ]]>
		     </isNotEmpty> 		     
		     <isNotEmpty property="fftPointPricing" prepend="and">
		         <![CDATA[  a.fft_point_pricing = #fftPointPricing# ]]>
		     </isNotEmpty> 
		     <isNotEmpty property="bankPointPricing" prepend="and">
		         <![CDATA[  a.bank_point_pricing = #bankPointPricing# ]]>
		     </isNotEmpty> 
		     <isNotEmpty property="fftpointCashPricing" prepend="and">
		         <![CDATA[  a.fftpoint_cash_pricing = #fftpointCashPricing# ]]>
		     </isNotEmpty> 
		     <isNotEmpty property="bankpointCashPricing" prepend="and">
		         <![CDATA[  a.bankpoint_cash_pricing = #bankpointCashPricing# ]]>
		     </isNotEmpty> 
		     <isNotEmpty property="fftpointcashRatioPricing" prepend="and">
		         <![CDATA[  a.fftpointcash_ratio_pricing = #fftpointcashRatioPricing# ]]>
		     </isNotEmpty> 
		     <isNotEmpty property="bankpointcashRatioPricing" prepend="and">
		         <![CDATA[  a.bankpointcash_ratio_pricing = #bankpointcashRatioPricing# ]]>
		     </isNotEmpty> 		     
    		<isNotEmpty property="inspectors" prepend="and">
    			<![CDATA[  a.inspectors = #inspectors# ]]>
    		</isNotEmpty>
    		<isNotEmpty property="marketTotalNumber" prepend="and">
    			<![CDATA[  a.market_total_number = #marketTotalNumber# ]]>
    		</isNotEmpty>
    		<isNotEmpty property="remark" prepend="and">
		         <![CDATA[  a.remark = #remark# ]]>
		      </isNotEmpty> 
		      <isNotEmpty property="merchantId" prepend="and">
		         <![CDATA[  a.merchant_id = #merchantId# ]]>
		      </isNotEmpty>
		    <isNotEmpty prepend="and" property="goodsCategoryId">
		         <![CDATA[  a.goods_category_id in (
		         	select id from goods_category where path like concat(
		         	(select path from goods_category where id=#goodsCategoryId#),'%') 
		         ) ]]>
		    </isNotEmpty> 
		    
		    <isNotEmpty property="goodsRackName" prepend="and">
		         <![CDATA[  a.goodsrack_name = #goodsRackName# ]]>
		      </isNotEmpty>
	        <isNotEmpty property="goodsRackDesc" prepend="and">
	             <![CDATA[  a.goodsrack_desc = #goodsRackDesc# ]]>
	        </isNotEmpty>
<!--    		<isNotEmpty property="beginTime">-->
<!--    			<isNotEmpty property="endTime" prepend="and">-->
<!--    				create_time between #beginTime# and #endTime#-->
<!--    			</isNotEmpty>-->
<!--    		</isNotEmpty>-->

				<isNotEmpty prepend="and" property="cashPricingDesc">
					<![CDATA[  a.cash_pricing_desc = #cashPricingDesc# ]]>
				</isNotEmpty>
				<isNotEmpty prepend="and" property="fftPointPricingDesc">
					<![CDATA[  a.fft_point_pricing_desc = #fftPointPricingDesc# ]]>
				</isNotEmpty>
				<isNotEmpty prepend="and" property="bankPointPricingDesc">
					<![CDATA[  a.bank_point_pricing_desc = #bankPointPricingDesc# ]]>
				</isNotEmpty>
				<isNotEmpty prepend="and" property="fftPointCashPricingDesc">
					<![CDATA[  a.fftpoint_cash_pricing_desc = #fftPointCashPricingDesc# ]]>
				</isNotEmpty>
				<isNotEmpty prepend="and" property="bankPointCashPricingDesc">
					<![CDATA[  a.bankpoint_cash_pricing_desc = #bankPointCashPricingDesc# ]]>
				</isNotEmpty>
				<isNotEmpty prepend="and" property="fftPointCashRatioPricingDesc">
					<![CDATA[  a.fftpointcash_ratio_pricing_desc = #fftPointCashRatioPricingDesc# ]]>
				</isNotEmpty>
				<isNotEmpty prepend="and" property="bankPointCashRatioPricingDesc">
					<![CDATA[  a.bankpointcash_ratio_pricing_desc = #bankPointCashRatioPricingDesc# ]]>
				</isNotEmpty>
				<isNotEmpty prepend="and" property="isIndexShow">
						a.is_index_show = #isIndexShow#
				</isNotEmpty>
				<isNotEmpty prepend="and" property="indexPriority">
						a.index_priority = #indexPriority#
				</isNotEmpty>	
				
    	</dynamic>
    </select>
	
	<!-- 分页 查询商品收款架列表  -->
    <select id="getGoodsExchangeRackListByPager"  parameterClass="goodsExchangeRack" resultMap="goodsExchangeRackResult">
    	select * from goods_exchange_rack a where <![CDATA[ a.state <> '50' ]]>	
    	<dynamic prepend="">
    		<isNotEmpty property="id" prepend="and">
    			<![CDATA[  a.id=#id# ]]>
    		</isNotEmpty>
    		<isNotEmpty prepend="and" property="sellerId">
				<![CDATA[ a.seller_id = #sellerId:VARCHAR# ]]>
			</isNotEmpty>
    		<isNotEmpty prepend="and" property="days">
		         <![CDATA[  a.days = #days# ]]>
		     </isNotEmpty>
    		<isNotEmpty property="goodsId" prepend="and">
    			<![CDATA[  a.goods_id = #goodsId# ]]>
    		</isNotEmpty>
    		<isNotEmpty property="isRack" prepend="and">
    			<![CDATA[  a.is_rack = #isRack# ]]>
    		</isNotEmpty>
    		<isNotEmpty property="rackTime" prepend="and">
    			<![CDATA[  a.rack_time = #rackTime# ]]>
    		</isNotEmpty>
    		<isNotEmpty property="state" prepend="and">
    			<![CDATA[ a.state=#state# ]]>
    		</isNotEmpty>
    		<isNotEmpty property="isCash" prepend="and">
		         <![CDATA[  a.is_cash = #isCash# ]]>
		     </isNotEmpty> 
		     <isNotEmpty property="isFftPoint" prepend="and">
		         <![CDATA[  a.is_fft_point = #isFftPoint# ]]>
		     </isNotEmpty> 
		     <isNotEmpty property="isBankPoint" prepend="and">
		         <![CDATA[  a.is_bank_point = #isBankPoint# ]]>
		     </isNotEmpty> 
		     <isNotEmpty property="isFftpointCash" prepend="and">
		         <![CDATA[  a.is_fftpoint_cash = #isFftpointCash# ]]>
		     </isNotEmpty> 
		     <isNotEmpty property="isBankpointCash" prepend="and">
		         <![CDATA[  a.is_bankpoint_cash = #isBankpointCash# ]]>
		     </isNotEmpty> 
		     <isNotEmpty property="isFftpointcashRatioPricing" prepend="and">
		         <![CDATA[  a.is_fftpointcash_ratio_pricing = #isFftpointcashRatioPricing# ]]>
		     </isNotEmpty> 
		     <isNotEmpty property="isBankpointcashRatioPricing" prepend="and">
		         <![CDATA[  a.is_bankpointcash_ratio_pricing = #isBankpointcashRatioPricing# ]]>
		     </isNotEmpty> 		     
		     <isNotEmpty property="cashPricing" prepend="and">
		         <![CDATA[  a.cash_pricing = #cashPricing# ]]>
		     </isNotEmpty> 		     
		     <isNotEmpty property="fftPointPricing" prepend="and">
		         <![CDATA[  a.fft_point_pricing = #fftPointPricing# ]]>
		     </isNotEmpty> 
		     <isNotEmpty property="bankPointPricing" prepend="and">
		         <![CDATA[  a.bank_point_pricing = #bankPointPricing# ]]>
		     </isNotEmpty> 
		     <isNotEmpty property="fftpointCashPricing" prepend="and">
		         <![CDATA[  a.fftpoint_cash_pricing = #fftpointCashPricing# ]]>
		     </isNotEmpty> 
		     <isNotEmpty property="bankpointCashPricing" prepend="and">
		         <![CDATA[  a.bankpoint_cash_pricing = #bankpointCashPricing# ]]>
		     </isNotEmpty> 
		     <isNotEmpty property="fftpointcashRatioPricing" prepend="and">
		         <![CDATA[  a.fftpointcash_ratio_pricing = #fftpointcashRatioPricing# ]]>
		     </isNotEmpty> 
		     <isNotEmpty property="bankpointcashRatioPricing" prepend="and">
		         <![CDATA[  a.bankpointcash_ratio_pricing = #bankpointcashRatioPricing# ]]>
		     </isNotEmpty> 		     
    		<isNotEmpty property="inspectors" prepend="and">
    			<![CDATA[  a.inspectors = #inspectors# ]]>
    		</isNotEmpty>
    		<isNotEmpty property="marketTotalNumber" prepend="and">
    			<![CDATA[  a.market_total_number = #marketTotalNumber# ]]>
    		</isNotEmpty>
    		<isNotEmpty property="remark" prepend="and">
		         <![CDATA[  a.remark = #remark# ]]>
		      </isNotEmpty> 
		      <isNotEmpty property="merchantId" prepend="and">
		         <![CDATA[  a.merchant_id = #merchantId# ]]>
		      </isNotEmpty>
		      
		      <isNotEmpty property="goodsRackName" prepend="and">
		         <![CDATA[  a.goodsrack_name = #goodsRackName# ]]>
		      </isNotEmpty>
	        <isNotEmpty property="goodsRackDesc" prepend="and">
	             <![CDATA[  a.goodsrack_desc = #goodsRackDesc# ]]>
	        </isNotEmpty>
	        
    		<isNotEmpty property="beginTime">
    			<isNotEmpty property="endTime" prepend="and">
    			<![CDATA[	a.create_time between #beginTime# and #endTime# ]]>
    			</isNotEmpty>
    		</isNotEmpty>
    		<isNotEmpty prepend="and" property="goodsCategoryId">
		         <![CDATA[  a.goods_category_id in (
		         	select id from goods_category where path like concat(
		         	(select path from goods_category where id=#goodsCategoryId#),'%') 
		         ) ]]>
		    </isNotEmpty> 
		    
		    <isNotEmpty prepend="and" property="cashPricingDesc">
				<![CDATA[  a.cash_pricing_desc = #cashPricingDesc# ]]>
			</isNotEmpty>
			<isNotEmpty prepend="and" property="fftPointPricingDesc">
				<![CDATA[  a.fft_point_pricing_desc = #fftPointPricingDesc# ]]>
			</isNotEmpty>
			<isNotEmpty prepend="and" property="bankPointPricingDesc">
				<![CDATA[  a.bank_point_pricing_desc = #bankPointPricingDesc# ]]>
			</isNotEmpty>
			<isNotEmpty prepend="and" property="fftPointCashPricingDesc">
				<![CDATA[  a.fftpoint_cash_pricing_desc = #fftPointCashPricingDesc# ]]>
			</isNotEmpty>
			<isNotEmpty prepend="and" property="bankPointCashPricingDesc">
				<![CDATA[  a.bankpoint_cash_pricing_desc = #bankPointCashPricingDesc# ]]>
			</isNotEmpty>
			<isNotEmpty prepend="and" property="fftPointCashRatioPricingDesc">
				<![CDATA[  a.fftpointcash_ratio_pricing_desc = #fftPointCashRatioPricingDesc# ]]>
			</isNotEmpty>
			<isNotEmpty prepend="and" property="bankPointCashRatioPricingDesc">
				<![CDATA[  a.bankpointcash_ratio_pricing_desc = #bankPointCashRatioPricingDesc# ]]>
			</isNotEmpty>
			<isNotEmpty prepend="and" property="isPresentPoints">
				<![CDATA[  a.is_present_points = #isPresentPoints# ]]>
			</isNotEmpty>
			<isNotEmpty prepend="and" property="isIndexShow">
					a.is_index_show = #isIndexShow#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="indexPriority">
					a.index_priority = #indexPriority#
			</isNotEmpty>	
    	</dynamic>            
            <![CDATA[ 
            		order by $orderBy$ $orderType$ ,update_time DESC
            		limit #startRow#,#pageSize#  
            ]]> 
    </select>
    
    <select id="getGoodsExchangeRackListByPagerCount"  parameterClass="goodsExchangeRack" resultClass="java.lang.Integer">
    	select count(*) from goods_exchange_rack a where <![CDATA[ a.state <> '50' ]]>	
    	<dynamic prepend="">
    		<isNotEmpty property="id" prepend="and">
    			<![CDATA[  a.id=#id# ]]>
    		</isNotEmpty>
    		<isNotEmpty prepend="and" property="sellerId">
				<![CDATA[ a.seller_id = #sellerId:VARCHAR# ]]>
			</isNotEmpty>
    		<isNotEmpty prepend="and" property="days">
		         <![CDATA[  a.days = #days# ]]>
		     </isNotEmpty> 
    		<isNotEmpty property="goodsId" prepend="and">
    			<![CDATA[  a.goods_id = #goodsId# ]]>
    		</isNotEmpty>
    		<isNotEmpty property="isRack" prepend="and">
    			<![CDATA[  a.is_rack = #isRack# ]]>
    		</isNotEmpty>
    		<isNotEmpty property="rackTime" prepend="and">
    			<![CDATA[  a.rack_time = #rackTime# ]]>
    		</isNotEmpty>
    		<isNotEmpty property="state" prepend="and">
    			<![CDATA[ a.state=#state# ]]>
    		</isNotEmpty>
    		<isNotEmpty property="isCash" prepend="and">
		         <![CDATA[  a.is_cash = #isCash# ]]>
		     </isNotEmpty> 
		     <isNotEmpty property="isFftPoint" prepend="and">
		         <![CDATA[  a.is_fft_point = #isFftPoint# ]]>
		     </isNotEmpty> 
		     <isNotEmpty property="isBankPoint" prepend="and">
		         <![CDATA[  a.is_bank_point = #isBankPoint# ]]>
		     </isNotEmpty> 
		     <isNotEmpty property="isFftpointCash" prepend="and">
		         <![CDATA[  a.is_fftpoint_cash = #isFftpointCash# ]]>
		     </isNotEmpty> 
		     <isNotEmpty property="isBankpointCash" prepend="and">
		         <![CDATA[  a.is_bankpoint_cash = #isBankpointCash# ]]>
		     </isNotEmpty> 
		     <isNotEmpty property="isFftpointcashRatioPricing" prepend="and">
		         <![CDATA[  a.is_fftpointcash_ratio_pricing = #isFftpointcashRatioPricing# ]]>
		     </isNotEmpty> 
		     <isNotEmpty property="isBankpointcashRatioPricing" prepend="and">
		         <![CDATA[  a.is_bankpointcash_ratio_pricing = #isBankpointcashRatioPricing# ]]>
		     </isNotEmpty> 		     
		     <isNotEmpty property="cashPricing" prepend="and">
		         <![CDATA[  a.cash_pricing = #cashPricing# ]]>
		     </isNotEmpty> 		     
		     <isNotEmpty property="fftPointPricing" prepend="and">
		         <![CDATA[  a.fft_point_pricing = #fftPointPricing# ]]>
		     </isNotEmpty> 
		     <isNotEmpty property="bankPointPricing" prepend="and">
		         <![CDATA[  a.bank_point_pricing = #bankPointPricing# ]]>
		     </isNotEmpty> 
		     <isNotEmpty property="fftpointCashPricing" prepend="and">
		         <![CDATA[  a.fftpoint_cash_pricing = #fftpointCashPricing# ]]>
		     </isNotEmpty> 
		     <isNotEmpty property="bankpointCashPricing" prepend="and">
		         <![CDATA[  a.bankpoint_cash_pricing = #bankpointCashPricing# ]]>
		     </isNotEmpty> 
		     <isNotEmpty property="fftpointcashRatioPricing" prepend="and">
		         <![CDATA[  a.fftpointcash_ratio_pricing = #fftpointcashRatioPricing# ]]>
		     </isNotEmpty> 
		     <isNotEmpty property="bankpointcashRatioPricing" prepend="and">
		         <![CDATA[  a.bankpointcash_ratio_pricing = #bankpointcashRatioPricing# ]]>
		     </isNotEmpty> 		     
    		<isNotEmpty property="inspectors" prepend="and">
    			<![CDATA[  a.inspectors = #inspectors# ]]>
    		</isNotEmpty>
    		<isNotEmpty property="marketTotalNumber" prepend="and">
    			<![CDATA[  a.market_total_number = #marketTotalNumber# ]]>
    		</isNotEmpty>
    		<isNotEmpty property="remark" prepend="and">
		         <![CDATA[  a.remark = #remark# ]]>
		      </isNotEmpty>
		      
		    <isNotEmpty property="goodsRackName" prepend="and">
		         <![CDATA[  a.goodsrack_name = #goodsRackName# ]]>
		      </isNotEmpty>
	        <isNotEmpty property="goodsRackDesc" prepend="and">
	             <![CDATA[  a.goodsrack_desc = #goodsRackDesc# ]]>
	        </isNotEmpty>
	        <isNotEmpty prepend="and" property="isPresentPoints">
				<![CDATA[  a.is_present_points = #isPresentPoints# ]]>
			</isNotEmpty>
		      <isNotEmpty property="merchantId" prepend="and">
		         <![CDATA[  a.merchant_id = #merchantId# ]]>
		      </isNotEmpty>
		      <isNotEmpty prepend="and" property="isIndexShow">
					a.is_index_show = #isIndexShow#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="indexPriority">
					a.index_priority = #indexPriority#
			</isNotEmpty>	
    		<isNotEmpty property="beginTime">
    			<isNotEmpty property="endTime" prepend="and">
    			<![CDATA[	a.create_time between #beginTime# and #endTime# ]]>
    			</isNotEmpty>
    		</isNotEmpty>
    		<isNotEmpty prepend="and" property="goodsCategoryId">
		         <![CDATA[  a.goods_category_id in (
		         	select id from goods_category where path like concat(
		         	(select path from goods_category where id=#goodsCategoryId#),'%') 
		         ) ]]>
		    </isNotEmpty> 
    	</dynamic>
    </select>
    
    
    <select id="getIndexGoodsRack" resultMap="goodsExchangeRackResult">
		select * from goods_exchange_rack where is_index_show=1 and state=30 and is_rack = '1' 
			order by index_priority ASC ,rack_time DESC
	</select>
</sqlMap>