<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="goodsCarryRack">
 
 <typeAlias alias="goodsCarryRack" type="com.froad.CB.po.GoodsCarryRack" />

 <resultMap class="goodsCarryRack" id="goodsCarryRackResult">
  <result property="id" column="id"/>
  <result property="goodsId" column="goods_id"/>
  <result property="goods" column="goods_id" select="goods.selectById"/>
  <result property="isRack" column="is_rack"/>
  <result property="rackTime" column="rack_time"/>
  <result property="inspectors" column="inspectors"/>
  <result property="marketTotalNumber" column="market_total_number"/>
  <result property="isCash" column="is_cash"/>
  <result property="isFftPoint" column="is_fft_point"/>
  <result property="isBankPoint" column="is_bank_point"/>
  <result property="isFftpointCash" column="is_fftpoint_cash"/>
  <result property="isBankpointCash" column="is_bankpoint_cash"/>
  <result property="isFftpointcashRatioPricing" column="is_fftpointcash_ratio_pricing"/>
  <result property="isBankpointcashRatioPricing" column="is_bankpointcash_ratio_pricing"/>
  <result property="cashPricing" column="cash_pricing"/>  
  <result property="fftPointPricing" column="fft_point_pricing"/> 
  <result property="bankPointPricing" column="bank_point_pricing"/> 
  <result property="fftpointCashPricing" column="fftpoint_cash_pricing"/> 
  <result property="bankpointCashPricing" column="bankpoint_cash_pricing"/> 
  <result property="fftpointcashRatioPricing" column="fftpointcash_ratio_pricing"/>
  <result property="bankpointcashRatioPricing" column="bankpointcash_ratio_pricing"/>   
  <result property="state" column="state"/>
  <result property="createTime" column="create_time"/>
  <result property="updateTime" column="update_time"/>
  <result property="remark" column="remark"/>
  
  <result property="goodsCategoryId" column="goods_category_id"/>
  <result property="sellerId" column="seller_id"/>
  <result property="seller" column="seller_id" select="seller.selectByPrimaryKey"/>
  <result property="merchantId" column="merchant_id"/>
  <result property="merchant" column="merchant_id" select="merchant.selectByPrimaryKey"/>
 </resultMap>
 
 <!-- 添加商品收款架信息 -->
 <insert id="addGoodsCarryRack" parameterClass="goodsCarryRack">
  <![CDATA[ 
    insert into goods_carry_rack(id,goods_category_id,seller_id,goods_id,is_rack,rack_time,inspectors,market_total_number,is_cash,
    is_fft_point,is_bank_point,is_fftpoint_cash,is_bankpoint_cash,is_fftpointcash_ratio_pricing,is_bankpointcash_ratio_pricing,cash_pricing,
    fft_point_pricing,bank_point_pricing,fftpoint_cash_pricing,bankpoint_cash_pricing,fftpointcash_ratio_pricing,bankpointcash_ratio_pricing,
    state,create_time,update_time,remark,merchant_id) 
    values(#id#,#goodsCategoryId#,#sellerId#,#goodsId#,#isRack#,#rackTime#,#inspectors#,#marketTotalNumber#,#isCash#,
    #isFftPoint#,#isBankPoint#,#isFftpointCash#,#isBankpointCash#,#isFftpointcashRatioPricing#,#isBankpointcashRatioPricing#,
    #cashPricing#,#fftPointPricing#,#bankPointPricing#,#fftpointCashPricing#,#bankpointCashPricing#,#fftpointcashRatioPricing#,#bankpointcashRatioPricing#,
    #state#,DATE_FORMAT(NOW(),"%Y-%m-%d|%H:%i:%s"),DATE_FORMAT(NOW(),"%Y-%m-%d|%H:%i:%s"),#remark#,#merchantId#)
  ]]>
   <selectKey keyProperty="id" resultClass="int">
    select last_insert_id() as id
   </selectKey>
 </insert>
 
 <!-- 更新商品收款架信息  -->
 <update id="updateGoodsCarryRackById" parameterClass="goodsCarryRack" >
     <![CDATA[ 
       update goods_carry_rack a 
       set a.update_time = DATE_FORMAT(NOW(),"%Y-%m-%d|%H:%i:%s")
     ]]>
  <dynamic>
       <isNotEmpty prepend="," property="goodsId">
           <![CDATA[  a.goods_id = #goodsId# ]]>
       </isNotEmpty>
       <isNotEmpty prepend="," property="isRack">
           <![CDATA[  a.is_rack = #isRack# ]]>
       </isNotEmpty> 
       <isNotEmpty prepend="," property="rackTime">
           <![CDATA[  a.rack_time = #rackTime# ]]>
       </isNotEmpty> 
       <isNotEmpty prepend="," property="inspectors">
           <![CDATA[  a.inspectors = #inspectors# ]]>
       </isNotEmpty> 
       <isNotEmpty prepend="," property="marketTotalNumber">
           <![CDATA[  a.market_total_number = #marketTotalNumber# ]]>
       </isNotEmpty> 
       <isNotEmpty prepend="," property="isCash">
           <![CDATA[  a.is_cash = #isCash# ]]>
       </isNotEmpty>        
       <isNotEmpty prepend="," property="isFftPoint">
           <![CDATA[  a.is_fft_point = #isFftPoint# ]]>
       </isNotEmpty> 
       <isNotEmpty prepend="," property="isBankPoint">
           <![CDATA[  a.is_bank_point = #isBankPoint# ]]>
       </isNotEmpty> 
       <isNotEmpty prepend="," property="isFftpointCash">
           <![CDATA[  a.is_fftpoint_cash = #isFftpointCash# ]]>
       </isNotEmpty> 
       <isNotEmpty prepend="," property="isBankpointCash">
           <![CDATA[  a.is_bankpoint_cash = #isBankpointCash# ]]>
       </isNotEmpty> 
       <isNotEmpty prepend="," property="isFftpointcashRatioPricing">
           <![CDATA[  a.is_fftpointcash_ratio_pricing = #isFftpointcashRatioPricing# ]]>
       </isNotEmpty> 
       <isNotEmpty prepend="," property="isBankpointcashRatioPricing">
           <![CDATA[  a.is_bankpointcash_ratio_pricing = #isBankpointcashRatioPricing# ]]>
       </isNotEmpty>        
       <isNotEmpty prepend="," property="cashPricing">
           <![CDATA[  a.cash_pricing = #cashPricing# ]]>
       </isNotEmpty>        
       <isNotEmpty prepend="," property="fftPointPricing">
           <![CDATA[  a.fft_point_pricing = #fftPointPricing# ]]>
       </isNotEmpty> 
       <isNotEmpty prepend="," property="bankPointPricing">
           <![CDATA[  a.bank_point_pricing = #bankPointPricing# ]]>
       </isNotEmpty> 
       <isNotEmpty prepend="," property="fftpointCashPricing">
           <![CDATA[  a.fftpoint_cash_pricing = #fftpointCashPricing# ]]>
       </isNotEmpty> 
       <isNotEmpty prepend="," property="bankpointCashPricing">
           <![CDATA[  a.bankpoint_cash_pricing = #bankpointCashPricing# ]]>
       </isNotEmpty> 
       <isNotEmpty prepend="," property="fftpointcashRatioPricing">
           <![CDATA[  a.fftpointcash_ratio_pricing = #fftpointcashRatioPricing# ]]>
       </isNotEmpty> 
       <isNotEmpty prepend="," property="bankpointcashRatioPricing">
           <![CDATA[  a.bankpointcash_ratio_pricing = #bankpointcashRatioPricing# ]]>
       </isNotEmpty>        
       <isNotEmpty prepend="," property="state">
           <![CDATA[  a.state = #state# ]]>
       </isNotEmpty> 
       <isNotEmpty prepend="," property="remark">
           <![CDATA[  a.remark = #remark# ]]>
        </isNotEmpty> 
  </dynamic>
  <![CDATA[ where a.id = #id# ]]>
 </update>
 
 <!-- 根据id物理删除商品收款架信息 -->
 <delete id="deleteByPrimaryKey" parameterClass="goodsCarryRack" >
     <![CDATA[ 
       delete from goods_carry_rack where id = #id#
      ]]>
 </delete>
 
 <!-- 根据id删除商品收款架信息 -->
 <update id="deleteStateByPrimaryKey" parameterClass="goodsCarryRack" >
     <![CDATA[ 
       update goods_carry_rack a 
        set a.update_time = DATE_FORMAT(NOW(),"%Y-%m-%d|%H:%i:%s"),a.state = '50' 
        where a.id = #id:INT#
      ]]>
 </update>
 
 <!-- 根据goodsId查询商品收款架信息 -->
 <select id="getGoodsCarryRackByGoodsId" parameterClass="string" resultMap="goodsCarryRackResult">
  select * from goods_carry_rack a where a.goods_id=#goodsId#
 </select>
 
 <!-- 根据主键编号查询商品收款架信息 -->
 <select id="selectByPrimaryKey" parameterClass="java.lang.Integer" resultMap="goodsCarryRackResult">
  select * from goods_carry_rack a where a.id=#id#
 </select>
 
 <!-- 查询商品收款架信息  -->
    <select id="getGoodsCarryRackBySelective"  parameterClass="goodsCarryRack" resultMap="goodsCarryRackResult">
     select * from goods_carry_rack a
     <dynamic prepend="where">
      <isNotEmpty property="id" prepend="and">
       <![CDATA[  a.id=#id# ]]>
      </isNotEmpty>
      <isNotEmpty property="goodsCategoryId" prepend="and">
       <![CDATA[  a.goods_category_id=#goodsCategoryId# ]]>
      </isNotEmpty>
      <isNotEmpty prepend="and" property="sellerId">
    a.seller_id = #sellerId:VARCHAR#
   </isNotEmpty>
      <isNotEmpty property="goodsId" prepend="and">
       <![CDATA[  a.goods_id = #goodsId# ]]>
      </isNotEmpty>
      <isNotEmpty property="isRack" prepend="and">
       <![CDATA[  a.is_rack = #isRack# ]]>
      </isNotEmpty>
      <isNotEmpty property="rackTime" prepend="and">
       <![CDATA[  a.rack_time = #rackTime# ]]>
      </isNotEmpty>
      <isNotEmpty property="state" prepend="and">
       <![CDATA[ a.state=#state# ]]>
      </isNotEmpty>
      <isNotEmpty property="isCash" prepend="and">
           <![CDATA[  a.is_cash = #isCash# ]]>
       </isNotEmpty> 
       <isNotEmpty property="isFftPoint" prepend="and">
           <![CDATA[  a.is_fft_point = #isFftPoint# ]]>
       </isNotEmpty> 
       <isNotEmpty property="isBankPoint" prepend="and">
           <![CDATA[  a.is_bank_point = #isBankPoint# ]]>
       </isNotEmpty> 
       <isNotEmpty property="isFftpointCash" prepend="and">
           <![CDATA[  a.is_fftpoint_cash = #isFftpointCash# ]]>
       </isNotEmpty> 
       <isNotEmpty property="isBankpointCash" prepend="and">
           <![CDATA[  a.is_bankpoint_cash = #isBankpointCash# ]]>
       </isNotEmpty> 
       <isNotEmpty property="isFftpointcashRatioPricing" prepend="and">
           <![CDATA[  a.is_fftpointcash_ratio_pricing = #isFftpointcashRatioPricing# ]]>
       </isNotEmpty> 
       <isNotEmpty property="isBankpointcashRatioPricing" prepend="and">
           <![CDATA[  a.is_bankpointcash_ratio_pricing = #isBankpointcashRatioPricing# ]]>
       </isNotEmpty>        
       <isNotEmpty property="cashPricing" prepend="and">
           <![CDATA[  a.cash_pricing = #cashPricing# ]]>
       </isNotEmpty>        
       <isNotEmpty property="fftPointPricing" prepend="and">
           <![CDATA[  a.fft_point_pricing = #fftPointPricing# ]]>
       </isNotEmpty> 
       <isNotEmpty property="bankPointPricing" prepend="and">
           <![CDATA[  a.bank_point_pricing = #bankPointPricing# ]]>
       </isNotEmpty> 
       <isNotEmpty property="fftpointCashPricing" prepend="and">
           <![CDATA[  a.fftpoint_cash_pricing = #fftpointCashPricing# ]]>
       </isNotEmpty> 
       <isNotEmpty property="bankpointCashPricing" prepend="and">
           <![CDATA[  a.bankpoint_cash_pricing = #bankpointCashPricing# ]]>
       </isNotEmpty> 
       <isNotEmpty property="fftpointcashRatioPricing" prepend="and">
           <![CDATA[  a.fftpointcash_ratio_pricing = #fftpointcashRatioPricing# ]]>
       </isNotEmpty> 
       <isNotEmpty property="bankpointcashRatioPricing" prepend="and">
           <![CDATA[  a.bankpointcash_ratio_pricing = #bankpointcashRatioPricing# ]]>
       </isNotEmpty>        
      <isNotEmpty property="inspectors" prepend="and">
       <![CDATA[  a.inspectors = #inspectors# ]]>
      </isNotEmpty>
      <isNotEmpty property="marketTotalNumber" prepend="and">
       <![CDATA[  a.market_total_number = #marketTotalNumber# ]]>
      </isNotEmpty>
      <isNotEmpty property="remark" prepend="and">
           <![CDATA[  a.remark = #remark# ]]>
        </isNotEmpty> 
        <isNotEmpty property="merchantId" prepend="and">
           <![CDATA[  a.merchant_id = #merchantId# ]]>
        </isNotEmpty>
<!--      <isNotEmpty property="beginTime">-->
<!--       <isNotEmpty property="endTime" prepend="and">-->
<!--        create_time between #beginTime# and #endTime#-->
<!--       </isNotEmpty>-->
<!--      </isNotEmpty>-->
     </dynamic>
    </select>
 
 <!-- 分页 查询商品收款架列表  -->
    <select id="getGoodsCarryRackListByPager"  parameterClass="goodsCarryRack" resultMap="goodsCarryRackResult">
     select * from goods_carry_rack a
     <dynamic prepend="where">
      <isNotEmpty property="id" prepend="and">
       <![CDATA[  a.id=#id# ]]>
      </isNotEmpty>
      <isNotEmpty property="goodsCategoryId" prepend="and">
       <![CDATA[  a.goods_category_id=#goodsCategoryId# ]]>
      </isNotEmpty>
      <isNotEmpty prepend="and" property="sellerId">
    <![CDATA[ a.seller_id = #sellerId:VARCHAR# ]]>
   </isNotEmpty>
      <isNotEmpty property="goodsId" prepend="and">
       <![CDATA[  a.goods_id = #goodsId# ]]>
      </isNotEmpty>
      <isNotEmpty property="isRack" prepend="and">
       <![CDATA[  a.is_rack = #isRack# ]]>
      </isNotEmpty>
      <isNotEmpty property="rackTime" prepend="and">
       <![CDATA[  a.rack_time = #rackTime# ]]>
      </isNotEmpty>
      <isNotEmpty property="state" prepend="and">
       <![CDATA[ a.state=#state# ]]>
      </isNotEmpty>
      <isNotEmpty property="isCash" prepend="and">
           <![CDATA[  a.is_cash = #isCash# ]]>
       </isNotEmpty> 
       <isNotEmpty property="isFftPoint" prepend="and">
           <![CDATA[  a.is_fft_point = #isFftPoint# ]]>
       </isNotEmpty> 
       <isNotEmpty property="isBankPoint" prepend="and">
           <![CDATA[  a.is_bank_point = #isBankPoint# ]]>
       </isNotEmpty> 
       <isNotEmpty property="isFftpointCash" prepend="and">
           <![CDATA[  a.is_fftpoint_cash = #isFftpointCash# ]]>
       </isNotEmpty> 
       <isNotEmpty property="isBankpointCash" prepend="and">
           <![CDATA[  a.is_bankpoint_cash = #isBankpointCash# ]]>
       </isNotEmpty> 
       <isNotEmpty property="isFftpointcashRatioPricing" prepend="and">
           <![CDATA[  a.is_fftpointcash_ratio_pricing = #isFftpointcashRatioPricing# ]]>
       </isNotEmpty> 
       <isNotEmpty property="isBankpointcashRatioPricing" prepend="and">
           <![CDATA[  a.is_bankpointcash_ratio_pricing = #isBankpointcashRatioPricing# ]]>
       </isNotEmpty>        
       <isNotEmpty property="cashPricing" prepend="and">
           <![CDATA[  a.cash_pricing = #cashPricing# ]]>
       </isNotEmpty>        
       <isNotEmpty property="fftPointPricing" prepend="and">
           <![CDATA[  a.fft_point_pricing = #fftPointPricing# ]]>
       </isNotEmpty> 
       <isNotEmpty property="bankPointPricing" prepend="and">
           <![CDATA[  a.bank_point_pricing = #bankPointPricing# ]]>
       </isNotEmpty> 
       <isNotEmpty property="fftpointCashPricing" prepend="and">
           <![CDATA[  a.fftpoint_cash_pricing = #fftpointCashPricing# ]]>
       </isNotEmpty> 
       <isNotEmpty property="bankpointCashPricing" prepend="and">
           <![CDATA[  a.bankpoint_cash_pricing = #bankpointCashPricing# ]]>
       </isNotEmpty> 
       <isNotEmpty property="fftpointcashRatioPricing" prepend="and">
           <![CDATA[  a.fftpointcash_ratio_pricing = #fftpointcashRatioPricing# ]]>
       </isNotEmpty> 
       <isNotEmpty property="bankpointcashRatioPricing" prepend="and">
           <![CDATA[  a.bankpointcash_ratio_pricing = #bankpointcashRatioPricing# ]]>
       </isNotEmpty>        
      <isNotEmpty property="inspectors" prepend="and">
       <![CDATA[  a.inspectors = #inspectors# ]]>
      </isNotEmpty>
      <isNotEmpty property="marketTotalNumber" prepend="and">
       <![CDATA[  a.market_total_number = #marketTotalNumber# ]]>
      </isNotEmpty>
      <isNotEmpty property="remark" prepend="and">
           <![CDATA[  a.remark = #remark# ]]>
        </isNotEmpty> 
        <isNotEmpty property="merchantId" prepend="and">
           <![CDATA[  a.merchant_id = #merchantId# ]]>
        </isNotEmpty>
      <isNotEmpty property="beginTime">
       <isNotEmpty property="endTime" prepend="and">
       <![CDATA[a.create_time between #beginTime# and #endTime# ]]>
       </isNotEmpty>
      </isNotEmpty>
     </dynamic>            
            <![CDATA[ 
              order by $orderBy$ $orderType$ 
              limit #startRow#,#pageSize#  
            ]]> 
    </select>
    
    <select id="getGoodsCarryRackListByPagerCount"  parameterClass="goodsCarryRack" resultClass="java.lang.Integer">
     select count(*) from goods_carry_rack a
     <dynamic prepend="where">
      <isNotEmpty property="id" prepend="and">
       <![CDATA[  a.id=#id# ]]>
      </isNotEmpty>
      <isNotEmpty property="goodsCategoryId" prepend="and">
       <![CDATA[  a.goods_category_id=#goodsCategoryId# ]]>
      </isNotEmpty>
      <isNotEmpty prepend="and" property="sellerId">
    <![CDATA[ a.seller_id = #sellerId:VARCHAR# ]]>
   </isNotEmpty>
      <isNotEmpty property="goodsId" prepend="and">
       <![CDATA[  a.goods_id = #goodsId# ]]>
      </isNotEmpty>
      <isNotEmpty property="isRack" prepend="and">
       <![CDATA[  a.is_rack = #isRack# ]]>
      </isNotEmpty>
      <isNotEmpty property="rackTime" prepend="and">
       <![CDATA[  a.rack_time = #rackTime# ]]>
      </isNotEmpty>
      <isNotEmpty property="state" prepend="and">
       <![CDATA[ a.state=#state# ]]>
      </isNotEmpty>
      <isNotEmpty property="isCash" prepend="and">
           <![CDATA[  a.is_cash = #isCash# ]]>
       </isNotEmpty> 
       <isNotEmpty property="isFftPoint" prepend="and">
           <![CDATA[  a.is_fft_point = #isFftPoint# ]]>
       </isNotEmpty> 
       <isNotEmpty property="isBankPoint" prepend="and">
           <![CDATA[  a.is_bank_point = #isBankPoint# ]]>
       </isNotEmpty> 
       <isNotEmpty property="isFftpointCash" prepend="and">
           <![CDATA[  a.is_fftpoint_cash = #isFftpointCash# ]]>
       </isNotEmpty> 
       <isNotEmpty property="isBankpointCash" prepend="and">
           <![CDATA[  a.is_bankpoint_cash = #isBankpointCash# ]]>
       </isNotEmpty> 
       <isNotEmpty property="isFftpointcashRatioPricing" prepend="and">
           <![CDATA[  a.is_fftpointcash_ratio_pricing = #isFftpointcashRatioPricing# ]]>
       </isNotEmpty> 
       <isNotEmpty property="isBankpointcashRatioPricing" prepend="and">
           <![CDATA[  a.is_bankpointcash_ratio_pricing = #isBankpointcashRatioPricing# ]]>
       </isNotEmpty>        
       <isNotEmpty property="cashPricing" prepend="and">
           <![CDATA[  a.cash_pricing = #cashPricing# ]]>
       </isNotEmpty>        
       <isNotEmpty property="fftPointPricing" prepend="and">
           <![CDATA[  a.fft_point_pricing = #fftPointPricing# ]]>
       </isNotEmpty> 
       <isNotEmpty property="bankPointPricing" prepend="and">
           <![CDATA[  a.bank_point_pricing = #bankPointPricing# ]]>
       </isNotEmpty> 
       <isNotEmpty property="fftpointCashPricing" prepend="and">
           <![CDATA[  a.fftpoint_cash_pricing = #fftpointCashPricing# ]]>
       </isNotEmpty> 
       <isNotEmpty property="bankpointCashPricing" prepend="and">
           <![CDATA[  a.bankpoint_cash_pricing = #bankpointCashPricing# ]]>
       </isNotEmpty> 
       <isNotEmpty property="fftpointcashRatioPricing" prepend="and">
           <![CDATA[  a.fftpointcash_ratio_pricing = #fftpointcashRatioPricing# ]]>
       </isNotEmpty> 
       <isNotEmpty property="bankpointcashRatioPricing" prepend="and">
           <![CDATA[  a.bankpointcash_ratio_pricing = #bankpointcashRatioPricing# ]]>
       </isNotEmpty>        
      <isNotEmpty property="inspectors" prepend="and">
       <![CDATA[  a.inspectors = #inspectors# ]]>
      </isNotEmpty>
      <isNotEmpty property="marketTotalNumber" prepend="and">
       <![CDATA[  a.market_total_number = #marketTotalNumber# ]]>
      </isNotEmpty>
      <isNotEmpty property="remark" prepend="and">
           <![CDATA[  a.remark = #remark# ]]>
        </isNotEmpty> 
        <isNotEmpty property="merchantId" prepend="and">
           <![CDATA[  a.merchant_id = #merchantId# ]]>
        </isNotEmpty>
      <isNotEmpty property="beginTime">
       <isNotEmpty property="endTime" prepend="and">
     		<![CDATA[ a.create_time between #beginTime# and #endTime# ]]>
       </isNotEmpty>
      </isNotEmpty>
     </dynamic>
    </select>
</sqlMap>