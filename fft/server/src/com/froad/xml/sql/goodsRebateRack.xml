<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="goodsRebateRack">
	<typeAlias alias="goodsRebateRack" type="com.froad.CB.po.GoodsRebateRack"/>

	<resultMap id="GoodsRebateRackResult" class="goodsRebateRack">
		<result column="id" property="id" jdbcType="INTEGER" />
		<result column="goods_id" property="goodsId" jdbcType="VARCHAR" />
		<result column="goods_id" property="goods" select="goods.selectById"/>
		<result column="is_rack" property="isRack" jdbcType="VARCHAR" />
		<result column="rack_time" property="rackTime" jdbcType="VARCHAR" />
		<result column="inspectors" property="inspectors" jdbcType="VARCHAR" />
		<result column="market_total_number" property="marketTotalNumber" jdbcType="VARCHAR" />
		<result column="is_cash" property="isCash" jdbcType="VARCHAR" />
		<result column="is_fft_point" property="isFftPoint" jdbcType="VARCHAR" />
		<result column="is_bank_point" property="isBankPoint" jdbcType="VARCHAR" />
		<result column="is_fftpoint_cash" property="isFftpointCash" jdbcType="VARCHAR" />
		<result column="is_bankpoint_cash" property="isBankpointCash" jdbcType="VARCHAR" />
		<result column="is_fftpointcash_ratio_pricing" property="isFftpointcashRatioPricing" jdbcType="VARCHAR" />
		<result column="is_bankpointcash_ratio_pricing" property="isBankpointcashRatioPricing" jdbcType="VARCHAR" />
		<result column="cash_pricing" property="cashPricing" jdbcType="VARCHAR" />
		<result column="fft_point_pricing" property="fftPointPricing" jdbcType="VARCHAR" />
		<result column="bank_point_pricing" property="bankPointPricing" jdbcType="VARCHAR" />
		<result column="fftpoint_cash_pricing" property="fftpointCashPricing" jdbcType="VARCHAR" />
		<result column="bankpoint_cash_pricing" property="bankpointCashPricing" jdbcType="VARCHAR" />
		<result column="fftpointcash_ratio_pricing" property="fftpointcashRatioPricing" jdbcType="VARCHAR" />
		<result column="bankpointcash_ratio_pricing" property="bankpointcashRatioPricing" jdbcType="VARCHAR" />
		<result column="state" property="state" jdbcType="VARCHAR" />
		<result column="create_time" property="createTime" jdbcType="VARCHAR" />
		<result column="update_time" property="updateTime" jdbcType="VARCHAR" />
		<result column="remark" property="remark" jdbcType="VARCHAR" />
		<result column="is_recommend" property="isRecommend" jdbcType="VARCHAR"/>
		<result column="rebate_value" property="rebateValue" jdbcType="VARCHAR"/>
		
		<result property="sellerId" column="seller_id"/>
		<result property="seller" column="seller_id" select="seller.selectByPrimaryKey"/>
		
		<result property="merchantId" column="merchant_id"/>
		<result property="merchant" column="merchant_id" select="merchant.selectByPrimaryKey"/>
		<result property="goodsRebateRackImages" column="id" select="goodsRebateRackImages.getByGoodsRebateRackId"/>
	</resultMap>
	
	<select id="selectByPrimaryKey" resultMap="GoodsRebateRackResult"
		parameterClass="java.lang.Integer">
		select * from goods_rebate_rack where id= #id:INTEGER#
	</select>
	
	<delete id="deleteByPrimaryKey" parameterClass="java.lang.Integer">
		delete from goods_rebate_rack where id = #id:INTEGER#
	</delete>
	
	<insert id="insert" parameterClass="goodsRebateRack">
		insert into goods_rebate_rack (id, seller_id,goods_id,rebate_value, is_rack, rack_time,
		inspectors, market_total_number, is_cash, is_fft_point,
		is_bank_point, is_fftpoint_cash, is_bankpoint_cash,
		is_fftpointcash_ratio_pricing, is_bankpointcash_ratio_pricing,
		cash_pricing, fft_point_pricing, bank_point_pricing,
		fftpoint_cash_pricing, bankpoint_cash_pricing,
		fftpointcash_ratio_pricing, bankpointcash_ratio_pricing, state,
		remark,is_recommend,create_time, update_time,merchant_id) values (#id:INTEGER#,#sellerId#,
		#goodsId:VARCHAR#,#rebateValue:VARCHAR#, #isRack:VARCHAR#, #rackTime:VARCHAR#,
		#inspectors:VARCHAR#, #marketTotalNumber:VARCHAR#,
		#isCash:VARCHAR#, #isFftPoint:VARCHAR#, #isBankPoint:VARCHAR#,
		#isFftpointCash:VARCHAR#, #isBankpointCash:VARCHAR#,
		#isFftpointcashRatioPricing:VARCHAR#,
		#isBankpointcashRatioPricing:VARCHAR#, #cashPricing:VARCHAR#,
		#fftPointPricing:VARCHAR#, #bankPointPricing:VARCHAR#,
		#fftpointCashPricing:VARCHAR#, #bankpointCashPricing:VARCHAR#,
		#fftpointcashRatioPricing:VARCHAR#,
		#bankpointcashRatioPricing:VARCHAR#, #state:VARCHAR#,
		#remark:VARCHAR#,#isRecommend#,
		DATE_FORMAT(NOW(),"%Y-%m-%d|%H:%i:%s"),DATE_FORMAT(NOW(),"%Y-%m-%d|%H:%i:%s"),#merchantId#)
		<selectKey keyProperty="id" resultClass="int">
			select last_insert_id() as id
		</selectKey>
	</insert>
	
	<update id="updateStateById" parameterClass="java.util.HashMap">
		update goods_rebate_rack set update_time =DATE_FORMAT(NOW(),"%Y-%m-%d|%H:%i:%s"),state=#state# where id=#id#
	</update>
	
	<update id="updateById" parameterClass="goodsRebateRack">
		update goods_rebate_rack set update_time =DATE_FORMAT(NOW(),"%Y-%m-%d|%H:%i:%s")
		<dynamic>
			<isNotEmpty prepend="," property="goodsId">
				goods_id = #goodsId:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="," property="rebateValue">
				rebate_value = #rebateValue:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="," property="isRecommend">
				is_recommend=#isRecommend:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="," property="isRack">
				is_rack = #isRack:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="," property="rackTime">
				rack_time = #rackTime:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="," property="inspectors">
				inspectors = #inspectors:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="," property="marketTotalNumber">
				market_total_number = #marketTotalNumber:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="," property="isCash">
				is_cash = #isCash:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="," property="isFftPoint">
				is_fft_point = #isFftPoint:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="," property="isBankPoint">
				is_bank_point = #isBankPoint:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="," property="isFftpointCash">
				is_fftpoint_cash = #isFftpointCash:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="," property="isBankpointCash">
				is_bankpoint_cash = #isBankpointCash:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="," property="isFftpointcashRatioPricing">
				is_fftpointcash_ratio_pricing =
				#isFftpointcashRatioPricing:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="," property="isBankpointcashRatioPricing">
				is_bankpointcash_ratio_pricing =
				#isBankpointcashRatioPricing:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="," property="cashPricing">
				cash_pricing = #cashPricing:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="," property="fftPointPricing">
				fft_point_pricing = #fftPointPricing:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="," property="bankPointPricing">
				bank_point_pricing = #bankPointPricing:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="," property="fftpointCashPricing">
				fftpoint_cash_pricing = #fftpointCashPricing:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="," property="bankpointCashPricing">
				bankpoint_cash_pricing = #bankpointCashPricing:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="," property="fftpointcashRatioPricing">
				fftpointcash_ratio_pricing =
				#fftpointcashRatioPricing:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="," property="bankpointcashRatioPricing">
				bankpointcash_ratio_pricing =
				#bankpointcashRatioPricing:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="," property="state">
				state = #state:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="," property="updateTime">
				update_time = #updateTime:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="," property="remark">
				remark = #remark:VARCHAR#
			</isNotEmpty>
		</dynamic>
		where id = #id:INTEGER#
	</update>
	
	<!-- 分页查询 -->
	<select id="getByPager" resultMap="GoodsRebateRackResult" parameterClass="goodsRebateRack">
		select * from goods_rebate_rack
		<dynamic prepend="where">
			<isNotEmpty prepend="and" property="goodsId">
				goods_id = #goodsId:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="sellerId">
				seller_id = #sellerId:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="rebateValue">
				rebate_value = #rebateValue:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="isRecommend">
				is_recommend=#isRecommend:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="isRack">
				is_rack = #isRack:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="rackTime">
				rack_time = #rackTime:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="inspectors">
				inspectors = #inspectors:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="marketTotalNumber">
				market_total_number = #marketTotalNumber:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="isCash">
				is_cash = #isCash:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="isFftPoint">
				is_fft_point = #isFftPoint:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="isBankPoint">
				is_bank_point = #isBankPoint:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="isFftpointCash">
				is_fftpoint_cash = #isFftpointCash:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="isBankpointCash">
				is_bankpoint_cash = #isBankpointCash:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="isFftpointcashRatioPricing">
				is_fftpointcash_ratio_pricing =
				#isFftpointcashRatioPricing:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="isBankpointcashRatioPricing">
				is_bankpointcash_ratio_pricing =
				#isBankpointcashRatioPricing:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="cashPricing">
				cash_pricing = #cashPricing:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="fftPointPricing">
				fft_point_pricing = #fftPointPricing:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="bankPointPricing">
				bank_point_pricing = #bankPointPricing:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="fftpointCashPricing">
				fftpoint_cash_pricing = #fftpointCashPricing:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="bankpointCashPricing">
				bankpoint_cash_pricing = #bankpointCashPricing:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="fftpointcashRatioPricing">
				fftpointcash_ratio_pricing =
				#fftpointcashRatioPricing:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="bankpointcashRatioPricing">
				bankpointcash_ratio_pricing =
				#bankpointcashRatioPricing:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="state">
				state = #state:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="updateTime">
				update_time = #updateTime:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="remark">
				remark = #remark:VARCHAR#
			</isNotEmpty>
			<isNotEmpty property="merchantId" prepend="and">
		         <![CDATA[  a.merchant_id = #merchantId# ]]>
		      </isNotEmpty>
			<isNotEmpty property="beginTime">
    			<isNotEmpty property="endTime" prepend="and">
    				create_time between #beginTime# and #endTime#
    			</isNotEmpty>
    		</isNotEmpty>
    	</dynamic>
        <![CDATA[ 
        order by $orderBy$ $orderType$ 
        limit #startRow#,#pageSize#  
        ]]>
	</select>
	
	<select id="getByPagerCount" resultClass="java.lang.Integer" parameterClass="goodsRebateRack">
		select count(*) from goods_rebate_rack
		<dynamic prepend="where">
			<isNotEmpty prepend="and" property="goodsId">
				goods_id = #goodsId:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="sellerId">
				seller_id = #sellerId:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="rebateValue">
				rebate_value = #rebateValue:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="isRecommend">
				is_recommend=#isRecommend:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="isRack">
				is_rack = #isRack:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="rackTime">
				rack_time = #rackTime:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="inspectors">
				inspectors = #inspectors:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="marketTotalNumber">
				market_total_number = #marketTotalNumber:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="isCash">
				is_cash = #isCash:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="isFftPoint">
				is_fft_point = #isFftPoint:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="isBankPoint">
				is_bank_point = #isBankPoint:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="isFftpointCash">
				is_fftpoint_cash = #isFftpointCash:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="isBankpointCash">
				is_bankpoint_cash = #isBankpointCash:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="isFftpointcashRatioPricing">
				is_fftpointcash_ratio_pricing =
				#isFftpointcashRatioPricing:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="isBankpointcashRatioPricing">
				is_bankpointcash_ratio_pricing =
				#isBankpointcashRatioPricing:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="cashPricing">
				cash_pricing = #cashPricing:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="fftPointPricing">
				fft_point_pricing = #fftPointPricing:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="bankPointPricing">
				bank_point_pricing = #bankPointPricing:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="fftpointCashPricing">
				fftpoint_cash_pricing = #fftpointCashPricing:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="bankpointCashPricing">
				bankpoint_cash_pricing = #bankpointCashPricing:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="fftpointcashRatioPricing">
				fftpointcash_ratio_pricing =
				#fftpointcashRatioPricing:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="bankpointcashRatioPricing">
				bankpointcash_ratio_pricing =
				#bankpointcashRatioPricing:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="state">
				state = #state:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="updateTime">
				update_time = #updateTime:VARCHAR#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="remark">
				remark = #remark:VARCHAR#
			</isNotEmpty>
			<isNotEmpty property="merchantId" prepend="and">
		         <![CDATA[  a.merchant_id = #merchantId# ]]>
		      </isNotEmpty>
			<isNotEmpty property="beginTime">
    			<isNotEmpty property="endTime" prepend="and">
    				create_time between #beginTime# and #endTime#
    			</isNotEmpty>
    		</isNotEmpty>
    	</dynamic>
	</select>
</sqlMap>