<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
		"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.froad.db.chonggou.mappers.MerchantMapperCG">

	<resultMap type="Merchant" id="merchantResultMap">
		<id property="id" column="id" />
		<result property="createTime" column="create_time" />
		<result property="clientId" column="client_id" />
		<result property="merchantId" column="merchant_id" />
		<result property="proOrgCode" column="pro_org_code" />
		<result property="cityOrgCode" column="city_org_code" />
		<result property="countyOrgCode" column="county_org_code" />
		<result property="orgCode" column="org_code" />
		<result property="merchantName" column="merchant_name" />
		<result property="merchantFullname" column="merchant_fullname" />
		<result property="logo" column="logo" />
		<result property="address" column="address" />
		<result property="phone" column="phone" />
		<result property="areaId" column="area_id" />
		<result property="merchantStatus" column="merchant_status" />
		<result property="isEnable" column="is_enable" />
		<result property="disableStatus" column="disable_status" />
		<result property="isTop" column="is_top" />
		<result property="introduce" column="introduce" />
		<result property="license" column="license" />
		<result property="taxReg" column="tax_reg" />
		<result property="contractBegintime" column="contract_begintime" />
		<result property="contractEndtime" column="contract_endtime" />
		<result property="contractStaff" column="contract_staff" />
		<result property="auditStartOrgCode" column="audit_start_org_code" />
		<result property="auditEndOrgCode" column="audit_end_org_code" />
		<result property="auditState" column="audit_state" />
		<result property="auditOrgCode" column="audit_org_code" />
		<result property="auditStage" column="audit_stage" />
		<result property="auditTime" column="audit_time" />
		<result property="auditComment" column="audit_comment" />
		<result property="auditStaff" column="audit_staff" />
		<result property="reviewStaff" column="review_staff" />
		<result property="contactName" column="contact_name" />
		<result property="contactPhone" column="contact_phone" />
		<result property="contactEmail" column="contact_email" />
		<result property="legalName" column="legal_name" />
		<result property="legalCredentType" column="legal_credent_type" />
		<result property="legalCredentNo" column="legal_credent_no" />
		<result property="complaintPhone" column="complaint_phone" />
		<result property="userOrgCode" column="user_org_code" />
		<result property="companyCredential" column="company_credential" />
		<!-- <result property="monthMoney" column="month_money" />
		<result property="groupOrderCount" column="group_order_count" />
		<result property="sellOrderCount" column="sell_order_count" /> -->
		
		<!-- 商户用户表 		
		<result property="merchantUserId" column="merchantUserId" />
		<result property="merchantUserName" column="username" />
		<result property="merchantRoleId" column="merchant_role_id" />
		-->
	</resultMap>


	<!-- 添加  Merchant -->
	<insert id="addMerchant" parameterType="Merchant" useGeneratedKeys="true" keyProperty="id">
		<![CDATA[
			INSERT INTO cb_merchant (
				create_time,client_id,merchant_id,pro_org_code,city_org_code,county_org_code,org_code,merchant_name,merchant_fullname,logo,address,phone,area_id,merchant_status,is_enable,disable_status,is_top,introduce,license,tax_reg,contract_begintime,contract_endtime,contract_staff,audit_start_org_code,audit_end_org_code,audit_state,audit_org_code,audit_stage,audit_time,audit_comment,audit_staff,review_staff,contact_name,contact_phone,contact_email,legal_name,legal_credent_type,legal_credent_no,complaint_phone,user_org_code,company_credential
			) VALUES (
				#{createTime},#{clientId},#{merchantId},#{proOrgCode},#{cityOrgCode},#{countyOrgCode},#{orgCode},#{merchantName},#{merchantFullname},#{logo},#{address},#{phone},#{areaId},#{merchantStatus},#{isEnable},#{disableStatus},#{isTop},#{introduce},#{license},#{taxReg},#{contractBegintime},#{contractEndtime},#{contractStaff},#{auditStartOrgCode},#{auditEndOrgCode},#{auditState},#{auditOrgCode},#{auditStage},#{auditTime},#{auditComment},#{auditStaff},#{reviewStaff},#{contactName},#{contactPhone},#{contactEmail},#{legalName},#{legalCredentType},#{legalCredentNo},#{complaintPhone},#{userOrgCode},#{companyCredential}
			) 
		]]>
	</insert>


	<!-- 批量添加  Merchant -->
	<insert id="addMerchantByBatch" parameterType="java.util.List">
		INSERT INTO cb_merchant (
			create_time,client_id,merchant_id,pro_org_code,city_org_code,county_org_code,org_code,merchant_name,merchant_fullname,logo,address,phone,area_id,merchant_status,is_enable,disable_status,is_top,introduce,license,tax_reg,contract_begintime,contract_endtime,contract_staff,audit_start_org_code,audit_end_org_code,audit_state,audit_org_code,audit_stage,audit_time,audit_comment,audit_staff,review_staff,contact_name,contact_phone,contact_email,legal_name,legal_credent_type,legal_credent_no
		) VALUES 
		<foreach collection="merchantList" item="item" index="index" separator=",">
			(#{createTime},#{clientId},#{merchantId},#{proOrgCode},#{cityOrgCode},#{countyOrgCode},#{orgCode},#{merchantName},#{merchantFullname},#{logo},#{address},#{phone},#{areaId},#{merchantStatus},#{isEnable},#{disableStatus},#{isTop},#{introduce},#{license},#{taxReg},#{contractBegintime},#{contractEndtime},#{contractStaff},#{auditStartOrgCode},#{auditEndOrgCode},#{auditState},#{auditOrgCode},#{auditStage},#{auditTime},#{auditComment},#{auditStaff},#{reviewStaff},#{contactName},#{contactPhone},#{contactEmail},#{legalName},#{legalCredentType},#{legalCredentNo})
		</foreach>
	</insert>

	<select id="findOneMerchant" parameterType="Merchant" resultMap="merchantResultMap">
		select * from cb_merchant
		<where>
			<if test="id != null">
				AND id = #{id}
			</if>
			<if test="clientId != null">
				AND client_id = #{clientId}
			</if>
			<if test="merchantId != null">
				AND merchant_id = #{merchantId}
			</if>
			<if test="orgCode != null">
				AND org_code = #{orgCode}
			</if>
			<if test="merchantName != null">
				AND merchant_name = #{merchantName}
			</if>
			<if test="merchantFullname != null">
				AND merchant_fullname = #{merchantFullname}
			</if>
			<if test="isTop != null">
				AND is_top = #{isTop}
			</if>
		</where>
	</select>
	<!-- 查询  Merchant -->
	<select id="findMerchantByMerchantId" parameterType="java.lang.String" resultMap="merchantResultMap">
		SELECT 
            cm.create_time,cm.client_id,cm.merchant_id,cm.pro_org_code,cm.city_org_code,cm.county_org_code,cm.org_code,cm.merchant_name,cm.merchant_fullname,cm.logo,cm.address,cm.phone,cm.area_id,cm.merchant_status,cm.is_enable,cm.disable_status,cm.is_top,cm.introduce,cm.license,cm.tax_reg,cm.contract_begintime,cm.contract_endtime,cm.contract_staff,cm.audit_start_org_code,cm.audit_end_org_code,cm.audit_state,cm.audit_org_code,cm.audit_stage,cm.audit_time,cm.audit_comment,cm.audit_staff,cm.review_staff,cm.contact_name,cm.contact_phone,cm.contact_email,cm.legal_name,cm.legal_credent_type,cm.legal_credent_no
        FROM cb_merchant cm 
        WHERE 
            cm.merchant_id = #{merchantId}

	</select>
	
	
		<!-- 统计 Merchant -->
	<select id="countMerchant" parameterType="Merchant" resultType="java.lang.Integer">
		SELECT 
            COUNT(cm.id) 
        FROM cb_merchant cm 
		<where>
			<if test="id != null">
				 AND cm.id = #{id}
			</if>
			<if test="clientId != null">
				 AND cm.client_id = #{clientId}
			</if>
			<if test="merchantId != null">
				 AND cm.merchant_id = #{merchantId}
			</if>
			<if test="proOrgCode != null">
				 AND cm.pro_org_code = #{proOrgCode}
			</if>
			<if test="cityOrgCode != null">
				 AND cm.city_org_code = #{cityOrgCode}
			</if>
			<if test="countyOrgCode != null">
				 AND cm.county_org_code = #{countyOrgCode}
			</if>
			<if test="orgCode != null">
				 AND cm.org_code = #{orgCode}
			</if>
			<if test="merchantName != null">
				 AND cm.merchant_name = #{merchantName}
			</if>
			<if test="merchantFullname != null">
				 AND cm.merchant_fullname = #{merchantFullname}
			</if>
			<if test="address != null">
				 AND cm.address = #{address}
			</if>
			<if test="phone != null">
				 AND cm.phone = #{phone}
			</if>
			<if test="areaId != null">
				 AND cm.area_id = #{areaId}
			</if>
			<if test="merchantStatus != null">
				 AND cm.merchant_status = #{merchantStatus}
			</if>
			<if test="isEnable != null">
				 AND cm.is_enable = #{isEnable}
			</if>
			<if test="disableStatus != null">
				 AND cm.disable_status = #{disableStatus}
			</if>
			<if test="isTop != null">
				 AND cm.is_top = #{isTop}
			</if>
			<if test="license != null">
				 AND cm.license = #{license}
			</if>
			<if test="taxReg != null">
				 AND cm.tax_reg = #{taxReg}
			</if>
			<if test="auditStartOrgCode != null">
				 AND cm.audit_start_org_code = #{auditStartOrgCode}
			</if>
			<if test="auditEndOrgCode != null">
				 AND cm.audit_end_org_code = #{auditEndOrgCode}
			</if>
			<if test="auditState != null">
				 AND cm.audit_state = #{auditState}
			</if>
			<if test="auditOrgCode != null">
				 AND cm.audit_org_code = #{auditOrgCode}
			</if>
			<if test="auditStage != null">
				 AND cm.audit_stage = #{auditStage}
			</if>
			<if test="contactName != null">
				 AND cm.contact_name = #{contactName}
			</if>
			<if test="contactPhone != null">
				 AND cm.contact_phone = #{contactPhone}
			</if>
			<if test="contactEmail != null">
				 AND cm.contact_email = #{contactEmail}
			</if>
			<if test="legalName != null">
				 AND cm.legal_name = #{legalName}
			</if>
			<if test="legalCredentType != null">
				 AND cm.legal_credent_type = #{legalCredentType}
			</if>
			<if test="legalCredentNo != null">
				 AND cm.legal_credent_no = #{legalCredentNo}
			</if>
			
		</where>
	</select>

</mapper>

