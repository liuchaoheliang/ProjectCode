<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
		"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.froad.db.chonggou.mappers.MerchantAccountMapperCG">

	<resultMap type="MerchantAccountCG" id="merchantAccountResultMap">
		<id property="id" column="id" />
		<result property="clientId" column="client_id" />
		<result property="createTime" column="create_time" />
		<result property="merchantId" column="merchant_id" />
		<result property="outletId" column="outlet_id" />
		<result property="acctName" column="acct_name" />
		<result property="acctNumber" column="acct_number" />
		<result property="acctType" column="acct_type" />
		<result property="openingBank" column="opening_bank" />
		<result property="isDelete" column="is_delete" />
	</resultMap>


	<!-- 添加  MerchantAccount -->
	<insert id="addMerchantAccount" parameterType="MerchantAccountCG" useGeneratedKeys="true" keyProperty="id">
		<![CDATA[
			INSERT INTO cb_merchant_account (
				create_time,client_id,merchant_id,outlet_id,acct_name,acct_number,acct_type,opening_bank,is_delete
			) VALUES (
				#{createTime},#{clientId},#{merchantId},#{outletId},#{acctName},#{acctNumber},#{acctType},#{openingBank},#{isDelete}
			) 
		]]>
	</insert>


	<!-- 批量添加  MerchantAccount -->
	<insert id="addMerchantAccountByBatch" parameterType="java.util.List">
		INSERT INTO cb_merchant_account (
			create_time,client_id,merchant_id,outlet_id,acct_name,acct_number,acct_type,opening_bank,is_delete
		) VALUES 
		<foreach collection="merchantAccountList" item="item" index="index" separator=",">
			(#{createTime},#{clientId},#{merchantId},#{outletId},#{acctName},#{acctNumber},#{acctType},#{openingBank},#{isDelete})
		</foreach>
	</insert>


	<!-- 删除  MerchantAccount -->
	<update id="deleteMerchantAccount" parameterType="MerchantAccountCG">
		UPDATE cb_merchant_account SET is_delete = true 
			<where>
				<if test="id != null">
					 AND id = #{id}
				</if>
				<if test="clientId != null">
					 AND client_id = #{clientId}
				</if>
				<if test="merchantId != null">
					 AND merchant_id = #{merchantId}
				</if>
				<if test="outletId != null">
					 AND outlet_id = #{outletId}
				</if>
				<if test="acctName != null">
					 AND acct_name = #{acctName}
				</if>
				<if test="acctNumber != null">
					 AND acct_number = #{acctNumber}
				</if>
				<if test="acctType != null">
					 AND acct_type = #{acctType}
				</if>
				<if test="openingBank != null">
					 AND opening_bank = #{openingBank}
				</if>
				<if test="isDelete != null">
					 AND is_delete = #{isDelete}
				</if>
			 
			</where>
	</update>


	<!-- 修改  MerchantAccount -->
	<update id="updateMerchantAccount" parameterType="MerchantAccountCG">
		UPDATE cb_merchant_account  
	           <set>
					
					<if test="acctName != null">
						  acct_name = #{acctName}, 
					</if>
					<if test="acctNumber != null">
						  acct_number = #{acctNumber}, 
					</if>
					<if test="acctType != null">
						  acct_type = #{acctType}, 
					</if>
					<if test="openingBank != null">
						  opening_bank = #{openingBank}, 
					</if>
			</set>
			<where>
				<if test="id != null">
					 AND id = #{id}
				</if>
				<if test="clientId != null">
					 AND client_id = #{clientId}
				</if>
				<if test="merchantId != null">
					 AND merchant_id = #{merchantId}
				</if>
				<if test="outletId != null">
					 AND outlet_id = #{outletId}
				</if>
				<if test="isDelete != null">
					 AND is_delete = #{isDelete}
				</if>
			</where>
	</update>


	<!-- 查询  MerchantAccount -->
	<select id="findMerchantAccountById" parameterType="java.lang.Long" resultMap="merchantAccountResultMap">
		SELECT 
            id,create_time,client_id,merchant_id,outlet_id,acct_name,acct_number,acct_type,opening_bank,is_delete 
        FROM cb_merchant_account 
        WHERE 
            id = #{id}

	</select>
	
	<!-- 查询  MerchantAccount -->
	<select id="findMerchantAccountByOutletId" parameterType="java.lang.String" resultMap="merchantAccountResultMap">
		SELECT 
            id,create_time,client_id,merchant_id,outlet_id,acct_name,acct_number,acct_type,opening_bank,is_delete 
        FROM cb_merchant_account 
        WHERE 
            outlet_id = #{outletId}

	</select>

	<!-- 查询  MerchantAccount -->
	<select id="findMerchantAccount" parameterType="MerchantAccountCG" resultMap="merchantAccountResultMap">
		SELECT 
            id,create_time,client_id,merchant_id,outlet_id,acct_name,acct_number,acct_type,opening_bank,is_delete 
        FROM cb_merchant_account 
		<where>
			<if test="id != null">
				 AND id = #{id}
			</if>
			<if test="clientId != null">
				 AND client_id = #{clientId}
			</if>
			<if test="merchantId != null">
				 AND merchant_id = #{merchantId}
			</if>
			<if test="outletId != null">
				 AND outlet_id = #{outletId}
			</if>
			<if test="acctName != null">
				 AND acct_name = #{acctName}
			</if>
			<if test="acctNumber != null">
				 AND acct_number = #{acctNumber}
			</if>
			<if test="acctType != null">
				 AND acct_type = #{acctType}
			</if>
			<if test="openingBank != null">
				 AND opening_bank = #{openingBank}
			</if>
			<if test="isDelete != null">
				 AND is_delete = #{isDelete}
			</if>
			<if test="createTime != null">
				 AND create_time = #{createTime}
			</if>
		</where>
	</select>

	<!-- 分页查询  MerchantAccount -->
	<select id="findByPage" parameterType="java.util.HashMap" resultMap="merchantAccountResultMap">
		SELECT 
            id,client_id,merchant_id,outlet_id,acct_name,acct_number,acct_type,opening_bank,is_delete 
        FROM cb_merchant_account 
		<if test="merchantAccount != null">
			<where>
				<if test="merchantAccount.id != null">
					 AND id = #{merchantAccount.id}
				</if>
				<if test="merchantAccount.clientId != null">
					 AND client_id = #{merchantAccount.clientId}
				</if>
				<if test="merchantAccount.merchantId != null">
					 AND merchant_id = #{merchantAccount.merchantId}
				</if>
				<if test="merchantAccount.outletId != null">
					 AND outlet_id = #{merchantAccount.outletId}
				</if>
				<if test="merchantAccount.acctName != null">
					 AND acct_name = #{merchantAccount.acctName}
				</if>
				<if test="merchantAccount.acctNumber != null">
					 AND acct_number = #{merchantAccount.acctNumber}
				</if>
				<if test="merchantAccount.acctType != null">
					 AND acct_type = #{merchantAccount.acctType}
				</if>
				<if test="merchantAccount.openingBank != null">
					 AND opening_bank = #{merchantAccount.openingBank}
				</if>
				<if test="merchantAccount.isDelete != null">
					 AND is_delete = #{merchantAccount.isDelete}
				</if>
				<if test="merchantAccount.createTime != null">
				 	AND create_time = #{merchantAccount.createTime}
				</if>
			</where>
		</if>
	</select>

		<!-- 物理删除 Merchant -->
	<delete id="removeMerchantAccount">
		DELETE FROM cb_merchant_account WHERE client_id = #{clientId}
	</delete>

</mapper>

