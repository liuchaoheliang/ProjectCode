<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.froad.db.chongqing.mappers.ProductCommentMapper">

	<resultMap type="ProductComment" id="productCommentResultMap">
    	<!-- baseEntity prop -->
        <id property="id" column="id"/>
        <result property="createTime" column="create_time"/>
        <result property="updateTime" column="update_time"/>
        <result property="clientId" column="client_id"/>
		<!-- baseEntity prop -->
		<result property="starLevel" column="star_level" />
		<result property="pricePoint" column="price_point" />
		<result property="productPoint" column="product_point" />
		<result property="qualityPoint" column="quality_point" />
		<result property="environmentPoint" column="environment_point" />
		<result property="serverPoint" column="server_point" />
		<result property="commentDescription" column="comment_description" />
		<result property="merchantId" column="merchant_id" />
		<result property="merchantName" column="merchant_name" />
		<result property="productId" column="product_id" />
		<result property="productName" column="product_name" />
		<result property="memberCode" column="member_code" />
		<result property="memberName" column="member_name" />
		<result property="memberMobile" column="member_mobile" />
		<result property="auditStatus" column="audit_status" 
		typeHandler="com.froad.db.extend.EnumTypeHandler"/>
		<result property="auditor" column="auditor" />
		<result property="auditRemark" column="audit_remark" />
		<result property="isDelete" column="is_delete" />
		<result property="orderValue" column="order_value" />
		
		<result property="orderId" column="order_id" />
		<result property="orderSn" column="order_sn" />
		<result property="image" column="image" />
		<result property="isReplay" column="is_replay" />
		<result property="merchantReplay" column="merchant_Replay" />
		<result property="orderType" column="order_type" 
		typeHandler="com.froad.db.extend.EnumTypeHandler"/>
		
		 <!-- merchantInfo merchant -->
		 <result property="merchantInfo.name" column="name"/>
		 <result property="merchantInfo.orgTreePath" column="org_tree_path"/>
		 <result property="merchantInfo.bankOrgName" column="bank_org_name"/>
		
    </resultMap>
    
    <!-- 查询 -->
    <select id="selectProductCommentById" parameterType="java.lang.Long" resultMap="productCommentResultMap">
		select * from cb_product_comment where id = #{id} 
	</select>
	
   <select id="selectAllProductComment" resultMap="productCommentResultMap">
   select * from cb_product_comment  where is_delete = 0
   </select>
    
    <!-- 条件查询 -->
    <select id="selectByCondition" parameterType="ProductComment" resultMap="productCommentResultMap">
    	select * from cb_product_comment
    </select>
      <!-- 条件查询 -->
    <select id="selectProductCommentByProductId" parameterType="java.lang.Long" resultMap="productCommentResultMap">
    	select price_point,quality_point,server_point,environment_point from cb_product_comment where product_id=#{id}
    </select>
    
        <select id="selectProductCommentByProductIdOnInt" parameterType="java.lang.Long" resultType="double">
    	SELECT AVG(star_level) FROM cb_product_comment where product_id=#{id} 
    </select>
    
</mapper>