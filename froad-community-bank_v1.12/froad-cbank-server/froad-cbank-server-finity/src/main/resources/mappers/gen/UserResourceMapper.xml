<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
		"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.froad.db.mysql.mapper.UserResourceMapper">

	<resultMap type="UserResource" id="userResourceResultMap">
		<result property="userId" column="user_id" />
		<result property="resourceId" column="resource_id" />
		<result property="userType" column="user_type" />
	</resultMap>


	<!-- 添加  UserResource -->
	<insert id="addUserResource" parameterType="UserResource" useGeneratedKeys="true" keyProperty="id">
		<![CDATA[
			INSERT INTO cb_user_resource (
				user_id,resource_id,user_type
			) VALUES (
				#{userId},#{resourceId},#{userType}
			) 
		]]>
	</insert>


	<!-- 批量添加  UserResource -->
	<insert id="addUserResourceByBatch" parameterType="java.util.List">
		INSERT INTO cb_user_resource (
			user_id,resource_id,user_type 
		) VALUES 
		<foreach collection="userResourceList" item="item" index="index" separator=",">
			(#{item.userId},#{item.resourceId},#{item.userType})
		</foreach>
	</insert>


	<!-- 删除  UserResource -->
	<delete id="deleteUserResource" parameterType="UserResource">
		DELETE FROM cb_user_resource 
			<where>
				<if test="userId != null">
					 AND user_id = #{userId}
				</if>
				<if test="resourceId != null">
					 AND resource_id = #{resourceId}
				</if>
				<if test="userType != null">
					 AND user_type = #{userType}
				</if>
			</where>
	</delete>


	<!-- 修改  UserResource -->
	<update id="updateUserResource" parameterType="UserResource">
		UPDATE cb_user_resource 
		<set>
				<if test="userId != null">
					  user_id = #{userId}, 
				</if>
				<if test="resourceId != null">
					  resource_id = #{resourceId}, 
				</if>
				<if test="userType != null">
					  user_type = #{userType}, 
				</if>
		</set>

			<where>
				<if test="userId != null">
					 AND user_id = #{userId}
				</if>
				<if test="resourceId != null">
					 AND resource_id = #{resourceId}
				</if>
				<if test="userType != null">
					 AND user_type = #{userType}
				</if>
			</where>
	</update>


	<!-- 查询  UserResource -->
	<select id="findUserResourceByUser_id" parameterType="java.lang.Long" resultMap="userResourceResultMap">
		SELECT 
            user_id,resource_id,user_type 
        FROM cb_user_resource 
        WHERE 
            user_id = #{userId}

	</select>

	<!-- 查询  UserResource -->
	<select id="findUserResource" parameterType="UserResource" resultMap="userResourceResultMap">
		SELECT 
            user_id,resource_id,user_type 
        FROM cb_user_resource 
		<where>
			<if test="userId != null">
				 AND user_id = #{userId}
			</if>
			<if test="resourceId != null">
				 AND resource_id = #{resourceId}
			</if>
			<if test="userType != null">
				 AND user_type = #{userType}
			</if>
		</where>
	</select>

	<!-- 分页查询  UserResource -->
	<select id="findByPage" parameterType="java.util.HashMap" resultMap="userResourceResultMap">
		SELECT 
            user_id,resource_id,user_type 
        FROM cb_user_resource 
		<if test="userResource != null">
			<where>
				<if test="userResource.userId != null">
					 AND user_id = #{userResource.userId}
				</if>
				<if test="userResource.resourceId != null">
					 AND resource_id = #{userResource.resourceId}
				</if>
				<if test="userResource.userType != null">
					 AND user_type = #{userResource.userType}
				</if>
			</where>
		</if>
	</select>


</mapper>

